{"version":3,"file":"ng-login-library.js.map","sources":["ng://ng-login-library/lib/services/login-config.service.ts","ng://ng-login-library/lib/services/login.service.ts","ng://ng-login-library/lib/services/login-ip.service.ts","ng://ng-login-library/lib/model/LoginIp.ts","ng://ng-login-library/lib/login.component.ts","ng://ng-login-library/lib/login.module.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginConfigService {\n\n  private title: string;\n  private loginUrl: string;\n  private loginApiUrl: string;\n  private loginIpUrl: string;\n  private logoutUrl: string;\n  private logoSrc: string;\n  private appid: string;\n\n  public getAppid(): string {\n    return this.appid;\n  }\n\n  public setAppid(value: string): void {\n    this.appid = value;\n  }\n\n  public getTitle(): string {\n    return this.title;\n  }\n\n  public setTitle(value: string): void {\n    this.title = value;\n  }\n\n  public getLoginUrl(): string {\n    return this.loginUrl;\n  }\n\n  public setLoginUrl(value: string): void {\n    this.loginUrl = value;\n  }\n\n  public getLoginApiUrl(): string {\n    return this.loginApiUrl;\n  }\n\n  public setLoginApiUrl(value: string): void {\n    this.loginApiUrl = value;\n  }\n\n  public getLoginIpUrl(): string {\n    return this.loginIpUrl;\n  }\n\n  public setLoginIpUrl(value: string): void {\n    this.loginIpUrl = value;\n  }\n\n  public getLogoutUrl(): string {\n    return this.logoutUrl;\n  }\n\n  public setLogoutUrl(value: string): void {\n    this.logoutUrl = value;\n  }\n\n  public getLogoSrc(): string {\n    return this.logoSrc;\n  }\n\n  public setLogoSrc(value: string): void {\n    this.logoSrc = value;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Storage} from '@ionic/storage';\nimport {JwtHelperService} from '@auth0/angular-jwt';\nimport {TokenApiService, User} from 'ng-common-library';\nimport {LoginConfigService} from './login-config.service';\nimport {Subject} from 'rxjs';\nimport {first} from 'rxjs/operators';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LoginService {\n\n    private currentUser: User = null;\n\n    public login$: Subject<User> = new Subject<User>();\n\n    public hideLogin = true;\n\n    public readonly JWT_USER_NAME = 'jwt_user';\n\n    constructor(\n        private http: HttpClient,\n        private storage: Storage,\n        private jwtHelper: JwtHelperService,\n        private loginConfigService: LoginConfigService,\n        private tokenService: TokenApiService) {\n\n        /*\n          Check if a user is already stored\n          This is for when child windows (ie. PSG)\n          are being opened.\n        */\n        storage.get(this.JWT_USER_NAME)\n            .then((user: User) => {\n                this.setCurrentUser(user);\n            });\n    }\n\n    public getCurrentUser(): User {\n        return this.currentUser;\n    }\n\n    public setCurrentUser(user: User): void {\n        this.currentUser = user;\n    }\n\n    public getLogoSrc(): string {\n        return this.loginConfigService.getLogoSrc();\n    }\n\n    public getLoginApiUrl(): string {\n        return this.loginConfigService.getLoginApiUrl();\n    }\n\n    public getLoginIpUrl(): string {\n        return this.loginConfigService.getLoginIpUrl();\n    }\n\n    public getLoginUrl(): string {\n        return this.loginConfigService.getLoginUrl();\n    }\n\n    public getLogoutUrl(): string {\n        return this.loginConfigService.getLogoutUrl();\n    }\n\n    public getTitle(): string {\n        return this.loginConfigService.getTitle();\n    }\n\n    /*\n      Check if we already have a token and see if it is still valid.\n      This is used to prevent the login screen from being presented\n      to the user when they restart the app.\n     */\n    public checkLogin() {\n        this.tokenService.token$.pipe(first()).subscribe((token: string) => {\n            if (!token) {\n                this.login$.next(null);\n                this.clearLocalUser();\n            } else {\n                const decodedToken = this.jwtHelper.decodeToken(token);\n                if (!decodedToken) {\n                    console.log('Invalid token received from server!');\n                    this.clearLocalUser();\n                    this.login$.next(null);\n                } else {\n                    const user = new User();\n                    user.username = decodedToken['sub'];\n                    user.firstname = decodedToken['firstname'];\n                    user.lastname = decodedToken['lastname'];\n                    user.roles = decodedToken['roles'];\n                    user.appid = decodedToken['appid'];\n                    /*\n                      This is set for the PSG popup window (or other windows like it) so that they can\n                      all have access to the current user. This only works if the popup windows\n                      all come from the same originating address, so it is quite safe.\n                     */\n                    this.storage.set(this.JWT_USER_NAME, user)\n                        .then(() => {\n                                console.log('New user [' + this.getCurrentUser().username + '] added to storage.');\n                            }\n                        );\n                    this.setCurrentUser(user);\n                    this.login$.next(user);\n                }\n            }\n        });\n        this.tokenService.checkToken();\n    }\n\n    public logIn(user: User) {\n        user.appid = this.loginConfigService.getAppid();\n        this.subAndCheckToken(user, true);\n        this.tokenService.getToken(user);\n    }\n\n    private subAndCheckToken(user: User, sendNullResponse: boolean) {\n        this.tokenService.token$.pipe(first()).subscribe((token: string) => {\n            if (!token) {\n                // The server thinks the token is not valid (expired, the secret key changed, etc)\n                console.log('Invalid token, not logged in.');\n                this.clearLocalUser();\n                if (sendNullResponse) {\n                    this.login$.next(null);\n                }\n            } else {\n                const decodedToken = this.jwtHelper.decodeToken(token);\n                if (!decodedToken) {\n                    console.log('Invalid token received from server!');\n                    this.setCurrentUser(null);\n                    if (sendNullResponse) {\n                        this.login$.next(null);\n                    }\n                } else if (decodedToken['sub'] !== user.username) {\n                    console.log('Invalid username in token received from server!');\n                    this.setCurrentUser(null);\n                    if (sendNullResponse) {\n                        this.login$.next(null);\n                    }\n                } else {\n                    user.firstname = decodedToken['firstname'];\n                    user.lastname = decodedToken['lastname'];\n                    user.roles = decodedToken['roles'];\n                    /*\n                      This is set for the PSG popup window (or other windows like it) so that they can\n                      all have access to the current user. This only works if the popup windows\n                      all come from the same originating address, so it is quite safe.\n                     */\n                    this.storage.set(this.JWT_USER_NAME, user)\n                        .then(() => {\n                                console.log('New user [' + this.getCurrentUser().username + '] added to storage.');\n                            }\n                        );\n                    this.setCurrentUser(user);\n                    this.login$.next(user);\n                }\n            }\n        });\n    }\n\n    /** Log the user out and return them to the login screen. */\n    public logOut() {\n        if (this.getCurrentUser() && this.getCurrentUser().username) {\n            this.http.post(this.loginConfigService.getLogoutUrl(), this.getCurrentUser()).pipe(first()).subscribe(() => {\n                console.log('Logged out');\n            });\n        }\n        this.clearLocalUser();\n    }\n\n    private clearLocalUser() {\n        let username = null;\n        if (this.getCurrentUser() && this.getCurrentUser().username) {\n            username = this.getCurrentUser().username;\n        }\n        this.setCurrentUser(null);\n        this.hideLogin = false;\n        this.tokenService.clearToken();\n        this.storage.remove(this.JWT_USER_NAME)\n            .then(() => {\n                if (username) {\n                    console.log('User [' + username + '] removed from storage');\n                } else {\n                    console.log('User removed from storage');\n                }\n            });\n    }\n}\n","import {HttpClient} from '@angular/common/http';\nimport {LoginIp} from '../model/LoginIp';\nimport {Injectable} from '@angular/core';\nimport {LoginService} from './login.service';\nimport {Subject} from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LoginIpService {\n\n    public loginIp$: Subject<LoginIp> = new Subject<LoginIp>();\n    public loginInfo: LoginIp = null;\n    constructor(private http: HttpClient, private loginService: LoginService) {\n    }\n\n    public getLoginIp() {\n        this.http.get<LoginIp>(this.loginService.getLoginIpUrl()).subscribe((loginIp: LoginIp) => {\n            console.log('Got login ip: ' + loginIp);\n            this.loginInfo = loginIp;\n            this.loginIp$.next(loginIp);\n        }, (e) => {\n            console.log('Could not get login ip: ' + e);\n            this.loginInfo = null;\n            this.loginIp$.next(null);\n        });\n    }\n}\n","export class LoginIp {\n  // Seed with defaults for maximum protection\n  uniqueDeviceIdentifier = '--';\n  copyRightInfo = 'Â© 2018 - PeraHealth, Inc.';\n  versionInfo = '--';\n  patentInfo = '| <strong>US Patent Nos.</strong> 8,092,380; 8,100,829; 8,355,925; 8,403,847 and 8,454,506; | <strong>Canadian Patent No.</strong> 2,599,387 and other Canadian and foreign patents pending.';\n}\n","import {AfterViewInit, Component, OnInit, ViewChildren, ViewEncapsulation} from '@angular/core';\n\nimport {LoginService} from './services/login.service';\nimport {LoginIp} from './model/LoginIp';\nimport {LoginIpService} from './services/login-ip.service';\nimport {User} from 'ng-common-library';\nimport {first} from 'rxjs/operators';\n\n@Component({\n  selector: 'phlib-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class LoginComponent implements OnInit, AfterViewInit {\n\n  @ViewChildren('input') vc;\n\n  private readonly NO_DICE = 'Error:  Username or password is incorrect';\n\n  loginInfo: LoginIp = new LoginIp();\n  errorMessage: string;\n  logoSrc: string;\n  title: string;\n  public userPassword: string;\n\n  constructor(public loginService: LoginService,\n              public loginLibraryIpService: LoginIpService) {\n  }\n\n  public getUser() {\n    if (!this.loginService.getCurrentUser()) {\n      this.loginService.setCurrentUser(new User());\n    }\n    return this.loginService.getCurrentUser();\n  }\n\n  ngOnInit() {\n    this.logoSrc = this.loginService.getLogoSrc();\n\n    this.loginLibraryIpService.loginIp$.pipe(first()).subscribe((loginIp: LoginIp) => {\n      if (loginIp) {\n        this.loginInfo = loginIp;\n      } else {\n        console.log('Could not get Login Information from server, using defaults.');\n      }\n    });\n    this.loginLibraryIpService.getLoginIp();\n    localStorage.removeItem('currentUser');\n    this.loginService.setCurrentUser(new User());\n    this.errorMessage = null;\n  }\n\n  login() {\n    // Retrieve a reference to the current user from the loginService\n    const user: User = this.getUser();\n    if (user.username && this.userPassword) {\n      // Base64 encode the password\n      user.password = btoa(this.userPassword);\n      this.loginService.login$.pipe(first()).subscribe((usr: User) => {\n        if (!usr) {\n          /*\n             Any error = this message. This is a security best practice as you\n             do not want to give the user any information that they can use to\n             get into the system.\n             Wipe out the encoded password\n           */\n          user.password = null;\n          this.userPassword = null;\n          this.errorMessage = this.NO_DICE;\n          this.loginErrored();\n        } else {\n          // Wipe out the encoded password\n          user.password = null;\n          this.errorMessage = null;\n          this.userPassword = null;\n        }\n      });\n      this.loginService.logIn(user);\n    } else {\n      this.errorMessage = this.NO_DICE;\n      this.loginErrored();\n    }\n  }\n\n  loginErrored() {\n    this.setFocusToUsernameField();\n  }\n\n  ngAfterViewInit(): void {\n    this.setFocusToUsernameField();\n  }\n\n  public setFocusToUsernameField() {\n    if (this.vc && this.vc.first && this.vc.first.nativeElement) {\n      this.vc.first.nativeElement.focus();\n    }\n  }\n}\n","import {LoginComponent} from './login.component';\nimport {LoginService} from './services/login.service';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {FormsModule} from '@angular/forms';\nimport {LoginConfigService} from './services/login-config.service';\nimport {ModuleWithProviders, NgModule} from '@angular/core';\nimport {LoginIpService} from './services/login-ip.service';\nimport {HttpClientModule} from '@angular/common/http';\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    FormsModule\n  ],\n  declarations: [LoginComponent],\n  exports: [LoginComponent]\n})\nexport class LoginModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: LoginModule,\n      providers: [\n        HttpClientModule,\n        LoginService,\n        LoginIpService,\n        LoginConfigService\n      ]\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
