/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';
import { PeraGraphService } from '../service/pera-graph.service';
import { WarningService } from 'ng-common-library';
import { ArrayViewService } from '../../../service/array-view.service';
var PeraGraphHeaderComponent = /** @class */ (function () {
    function PeraGraphHeaderComponent(peraGraphService, warningService, arrayViewService, ref) {
        this.peraGraphService = peraGraphService;
        this.warningService = warningService;
        this.arrayViewService = arrayViewService;
        this.ref = ref;
    }
    /**
     * @return {?}
     */
    PeraGraphHeaderComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // Subscribe to the chart title subject and invoke change detection when new value is pushed.
        this.arrayViewService.chartTitleSubject$.subscribe(function () {
            if (_this.ref) {
                _this.ref.detectChanges();
            }
        });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    PeraGraphHeaderComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // If the latest RI or graph changed, update the header color
        if (changes.latestRi || changes.graph) {
            this.updateHeaderColor();
        }
        this.priorWarningIndicator = this.warningService.getWarningClass(this.priorWarning);
        // This is so that QA can find the prior warning indicator and ensure that it has the correct color
        this.priorWarningIndicatorId = 'priorWarningIndicator-' + this.graph.vnm;
    };
    /**
     * @return {?}
     */
    PeraGraphHeaderComponent.prototype.updateHeaderColor = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var warning = (this.graph) ? this.graph.activeWarning : null;
        this.style = {
            backgroundColor: this.peraGraphService.getBackgroundColorByWarningAndRi(warning, this.latestRi, this.graph.discharged),
            width: '100%',
        };
    };
    PeraGraphHeaderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'phlib-pera-graph-header',
                    template: "<div id=\"{{ arrayViewService.chartTitleSubject$.value.returnFunc(this.graph) }}\" class=\"ph-header\">\n    <!-- Match the background color to the warning level-->\n    <div id=\"headerbackground\" class=\"inner\" [ngStyle]=\"style\">&nbsp;</div>\n    <!-- Display the prior warning indicator on the right side of the header -->\n    <div id=\"{{priorWarningIndicatorId}}}\" class=\"inner {{priorWarningIndicator}}\" style=\"width: 100%; background-color: transparent\"></div>\n    <!-- Display the graph title... could be the Patient's Name, the MRN, the VNM, etc-->\n    <div class=\"inner ph-header-title\" style=\"background-color: transparent\">\n      {{ arrayViewService.chartTitleSubject$.value.returnFunc(this.graph) }}\n    </div>\n    <!-- Display the Rothman Index on the right side of the header -->\n    <div class=\"inner ph-header-score\" style=\"background-color: transparent\">\n        {{ this.peraGraphService.getRiScoreToDisplay(this.latestRi) }}\n    </div>\n</div>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [".inner{position:absolute}.ph-header{color:#fff;width:100%;white-space:nowrap}.ph-header-title{text-shadow:1px 1px 3px #000;font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:table-cell;vertical-align:middle;padding-left:5px;padding-right:5px;padding-top:1px;width:90%}.ph-header-score{font-size:.8em;text-shadow:1px 1px 3px #000;padding-right:5px;width:100%;text-align:right;align-content:right;padding-top:1px}.hide-on-compact{display:none}div{float:left}#headerbackground{height:16%;border-bottom:1px solid #000}.m-warning{width:0;height:0;padding-left:12%;padding-top:12%;overflow:hidden;float:right}.m-warning:after{content:\"\";display:block;width:0;height:0;margin-left:-500px;margin-top:-500px;float:right;border-left:500px solid transparent;border-top:500px solid #f6cc5d}.h-warning{width:0;height:0;padding-left:12%;padding-top:12%;overflow:hidden;float:right}.h-warning:after{content:\"\";display:block;width:0;height:0;margin-left:-500px;margin-top:-500px;float:right;border-left:500px solid transparent;border-top:500px solid #ee834c}.vh-warning{width:0;height:0;padding-left:12%;padding-top:12%;overflow:hidden;float:right}.vh-warning:after{content:\"\";display:block;width:0;height:0;margin-left:-500px;margin-top:-500px;float:right;border-left:500px solid transparent;border-top:500px solid #d51c19}"]
                }] }
    ];
    /** @nocollapse */
    PeraGraphHeaderComponent.ctorParameters = function () { return [
        { type: PeraGraphService },
        { type: WarningService },
        { type: ArrayViewService },
        { type: ChangeDetectorRef }
    ]; };
    PeraGraphHeaderComponent.propDecorators = {
        graph: [{ type: Input }],
        latestRi: [{ type: Input }],
        priorWarning: [{ type: Input }]
    };
    return PeraGraphHeaderComponent;
}());
export { PeraGraphHeaderComponent };
if (false) {
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.graph;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.latestRi;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.style;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.priorWarningIndicator;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.priorWarningIndicatorId;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.priorWarning;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.peraGraphService;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.warningService;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.arrayViewService;
    /** @type {?} */
    PeraGraphHeaderComponent.prototype.ref;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVyYS1ncmFwaC1oZWFkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctYXJyYXktdmlldy1saWJyYXJ5LyIsInNvdXJjZXMiOlsibGliL2dyb3VwL3BlcmEtZ3JhcGgvcGVyYS1ncmFwaC1oZWFkZXIvcGVyYS1ncmFwaC1oZWFkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQzFDLFNBQVMsRUFDVCxLQUFLLEVBSVIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sK0JBQStCLENBQUM7QUFDL0QsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLHFDQUFxQyxDQUFDO0FBRXJFO0lBc0JFLGtDQUFtQixnQkFBa0MsRUFDbEMsY0FBOEIsRUFDOUIsZ0JBQWtDLEVBQ2xDLEdBQXNCO1FBSHRCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFDbEMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFDbEMsUUFBRyxHQUFILEdBQUcsQ0FBbUI7SUFDekMsQ0FBQzs7OztJQUVELDJDQUFROzs7SUFBUjtRQUFBLGlCQU9DO1FBTkcsNkZBQTZGO1FBQzdGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUM7WUFDL0MsSUFBSSxLQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNWLEtBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7YUFDNUI7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7Ozs7O0lBRUQsOENBQVc7Ozs7SUFBWCxVQUFZLE9BQXNCO1FBQ2hDLDZEQUE2RDtRQUM3RCxJQUFJLE9BQU8sQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssRUFBRTtZQUNyQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztTQUMxQjtRQUNELElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDcEYsbUdBQW1HO1FBQ25HLElBQUksQ0FBQyx1QkFBdUIsR0FBRyx3QkFBd0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUMzRSxDQUFDOzs7O0lBRUQsb0RBQWlCOzs7SUFBakI7O1lBQ1EsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUM5RCxJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1gsZUFBZSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztZQUN0SCxLQUFLLEVBQUUsTUFBTTtTQUNkLENBQUM7SUFDSixDQUFDOztnQkFyREYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSx5QkFBeUI7b0JBQ25DLDArQkFBaUQ7b0JBRWpELGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOztpQkFDaEQ7Ozs7Z0JBVE8sZ0JBQWdCO2dCQUNoQixjQUFjO2dCQUNkLGdCQUFnQjtnQkFUSyxpQkFBaUI7Ozt3QkFtQjNDLEtBQUs7MkJBR0wsS0FBSzsrQkFRTCxLQUFLOztJQW9DUiwrQkFBQztDQUFBLEFBdkRELElBdURDO1NBakRZLHdCQUF3Qjs7O0lBRW5DLHlDQUNNOztJQUVOLDRDQUNTOztJQUVULHlDQUFxQjs7SUFFckIseURBQXNCOztJQUN0QiwyREFBd0I7O0lBRXhCLGdEQUNxQjs7SUFFVCxvREFBeUM7O0lBQ3pDLGtEQUFxQzs7SUFDckMsb0RBQXlDOztJQUN6Qyx1Q0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgSW5wdXQsXG4gICAgT25DaGFuZ2VzLFxuICAgIE9uSW5pdCxcbiAgICBTaW1wbGVDaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtQZXJhR3JhcGhTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlL3BlcmEtZ3JhcGguc2VydmljZSc7XG5pbXBvcnQge1dhcm5pbmdTZXJ2aWNlfSBmcm9tICduZy1jb21tb24tbGlicmFyeSc7XG5pbXBvcnQge0FycmF5Vmlld1NlcnZpY2V9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvYXJyYXktdmlldy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncGhsaWItcGVyYS1ncmFwaC1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vcGVyYS1ncmFwaC1oZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wZXJhLWdyYXBoLWhlYWRlci5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFBlcmFHcmFwaEhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcblxuICBASW5wdXQoKVxuICBncmFwaDtcblxuICBASW5wdXQoKVxuICBsYXRlc3RSaTtcblxuICBwdWJsaWMgc3R5bGU6IG9iamVjdDtcblxuICBwcmlvcldhcm5pbmdJbmRpY2F0b3I7XG4gIHByaW9yV2FybmluZ0luZGljYXRvcklkO1xuXG4gIEBJbnB1dCgpXG4gIHByaW9yV2FybmluZzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwZXJhR3JhcGhTZXJ2aWNlOiBQZXJhR3JhcGhTZXJ2aWNlLFxuICAgICAgICAgICAgICBwdWJsaWMgd2FybmluZ1NlcnZpY2U6IFdhcm5pbmdTZXJ2aWNlLFxuICAgICAgICAgICAgICBwdWJsaWMgYXJyYXlWaWV3U2VydmljZTogQXJyYXlWaWV3U2VydmljZSxcbiAgICAgICAgICAgICAgcHVibGljIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgICAgLy8gU3Vic2NyaWJlIHRvIHRoZSBjaGFydCB0aXRsZSBzdWJqZWN0IGFuZCBpbnZva2UgY2hhbmdlIGRldGVjdGlvbiB3aGVuIG5ldyB2YWx1ZSBpcyBwdXNoZWQuXG4gICAgICB0aGlzLmFycmF5Vmlld1NlcnZpY2UuY2hhcnRUaXRsZVN1YmplY3QkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMucmVmKSB7XG4gICAgICAgICAgICAgIHRoaXMucmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAvLyBJZiB0aGUgbGF0ZXN0IFJJIG9yIGdyYXBoIGNoYW5nZWQsIHVwZGF0ZSB0aGUgaGVhZGVyIGNvbG9yXG4gICAgaWYgKGNoYW5nZXMubGF0ZXN0UmkgfHwgY2hhbmdlcy5ncmFwaCkge1xuICAgICAgdGhpcy51cGRhdGVIZWFkZXJDb2xvcigpO1xuICAgIH1cbiAgICB0aGlzLnByaW9yV2FybmluZ0luZGljYXRvciA9IHRoaXMud2FybmluZ1NlcnZpY2UuZ2V0V2FybmluZ0NsYXNzKHRoaXMucHJpb3JXYXJuaW5nKTtcbiAgICAvLyBUaGlzIGlzIHNvIHRoYXQgUUEgY2FuIGZpbmQgdGhlIHByaW9yIHdhcm5pbmcgaW5kaWNhdG9yIGFuZCBlbnN1cmUgdGhhdCBpdCBoYXMgdGhlIGNvcnJlY3QgY29sb3JcbiAgICB0aGlzLnByaW9yV2FybmluZ0luZGljYXRvcklkID0gJ3ByaW9yV2FybmluZ0luZGljYXRvci0nICsgdGhpcy5ncmFwaC52bm07XG4gIH1cblxuICB1cGRhdGVIZWFkZXJDb2xvcigpIHtcbiAgICBjb25zdCB3YXJuaW5nID0gKHRoaXMuZ3JhcGgpID8gdGhpcy5ncmFwaC5hY3RpdmVXYXJuaW5nIDogbnVsbDtcbiAgICB0aGlzLnN0eWxlID0ge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnBlcmFHcmFwaFNlcnZpY2UuZ2V0QmFja2dyb3VuZENvbG9yQnlXYXJuaW5nQW5kUmkod2FybmluZywgdGhpcy5sYXRlc3RSaSwgdGhpcy5ncmFwaC5kaXNjaGFyZ2VkKSxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgfTtcbiAgfVxuXG59XG4iXX0=