{"version":3,"file":"ng-array-view-library.js.map","sources":["ng://ng-array-view-library/lib/service/array-view-config.service.ts","ng://ng-array-view-library/lib/service/chartTitleEnum.ts","ng://ng-array-view-library/lib/service/array-view.service.ts","ng://ng-array-view-library/lib/model/WarningColors.ts","ng://ng-array-view-library/lib/group/pera-graph/service/pera-graph.service.ts","ng://ng-array-view-library/lib/service/prior-warnings/config/prior-warnings-config.service.ts","ng://ng-array-view-library/lib/service/prior-warnings/api/prior-warnings-api.service.ts","ng://ng-array-view-library/lib/array-view.component.ts","ng://ng-array-view-library/lib/group/group.component.ts","ng://ng-array-view-library/lib/group/pera-graph/service/tooltip.service.ts","ng://ng-array-view-library/lib/group/pera-graph/pera-graph.component.ts","ng://ng-array-view-library/lib/group/pera-graph/chart/chart.component.ts","ng://ng-array-view-library/lib/group/pera-graph/pera-graph-tile/pera-graph-tile.component.ts","ng://ng-array-view-library/lib/group/group-header/group-header.component.ts","ng://ng-array-view-library/lib/group/pera-graph/pera-graph-header/pera-graph-header.component.ts","ng://ng-array-view-library/lib/group/pera-graph/tooltip/tooltip.component.ts","ng://ng-array-view-library/lib/array-view.module.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport * as moment_ from 'moment';\nimport {BehaviorSubject, Subject} from 'rxjs';\n\n// The JavaScript compiler gives a weird \"moment cannot be used as a namespace\" type of error\n// This is the workaround...\nconst moment = moment_;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ArrayViewConfigService {\n    public configurationLoaded$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n    private currentTimestamp: number = null;\n    private toolTipInfoEndPoint: string = null;\n\n    public getToolTipInfoEndPoint() {\n        if (!this.toolTipInfoEndPoint) {\n            console.warn('Tooltip endpoint is not set!');\n        }\n        return this.toolTipInfoEndPoint;\n    }\n\n    public setToolTipInfoEndPoint(val: string) {\n        this.toolTipInfoEndPoint = val;\n    }\n\n    public getCurrentTimestamp(): number {\n        return this.currentTimestamp;\n    }\n\n    public setCurrentTimestamp(value: number): void {\n        this.currentTimestamp = value;\n    }\n}\n","export enum ChartTitleChoices {\n    VNM = 'Visit Number',\n    ADMIT_DATE = 'Admission Date',\n    MRN = 'Medical Record Number',\n    PATIENT_NAME = 'Patient Name',\n    LOCATION = 'Room Number',\n    ANONYMOUS = 'Anonymous'\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {map} from 'rxjs/operators';\nimport * as moment_ from 'moment-timezone';\nimport {ArrayViewConfigService} from './array-view-config.service';\nimport {DateService, FlowsheetsApiService, PeragraphApiService} from 'ng-common-library';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\nimport {FilterQueryRestService, FilterService, GroupService, SortService} from 'ng-filters-library';\nimport {BehaviorSubject, forkJoin, Observable, of, Subject} from 'rxjs';\nimport {ChartTitleChoices} from './chartTitleEnum';\n\n// The JavaScript compiler gives a weird \"moment cannot be used as a namespace\" type of error\n// This is the workaround...\nconst moment = moment_;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ArrayViewService {\n\n    // The possible chart title selections\n    titleChoices: {description: string, returnFunc: (peraGraph: PeraGraph) => any}[] = [\n        {\n            description: ChartTitleChoices.VNM,\n            returnFunc: (peraGraph: PeraGraph) => {\n                return peraGraph.vnm;\n            }\n        },\n        {\n            description: ChartTitleChoices.ADMIT_DATE,\n            returnFunc: (peraGraph: PeraGraph) => {\n                if (peraGraph && peraGraph.timeZone && peraGraph.admitDate) {\n                    return this.dateService.getDateFormat(peraGraph.timeZone, peraGraph.admitDate, 'MM/DD/YY HH:mm z');\n                }\n                return '';\n            }\n        },\n        {\n            description: ChartTitleChoices.MRN,\n            returnFunc: (peraGraph: PeraGraph) => {\n                return peraGraph.patient.medicalRecordNumber;\n            }\n        },\n        {\n            description: ChartTitleChoices.PATIENT_NAME,\n            returnFunc: (peraGraph: PeraGraph) => {\n                if (peraGraph.vipIndicator) {\n                    return peraGraph.patient.aliasLastName + ', ' + peraGraph.patient.aliasFirstName;\n                } else {\n                    return peraGraph.displayName;\n                }\n            }\n        },\n        {\n            description: ChartTitleChoices.LOCATION,\n            returnFunc: (peraGraph: PeraGraph) => {\n                return peraGraph.unitId + '-' + peraGraph.room + '-' + peraGraph.bed;\n            }\n        },\n        {\n            description: ChartTitleChoices.ANONYMOUS,\n            returnFunc: (peraGraph: PeraGraph) => {\n                return 'Chart ' + peraGraph.anonymous;\n            }\n        }\n    ];\n\n    // Current chart title selection - defaults to Patient Name\n    selectedChartTitle: {description: string, returnFunc: (peraGraph: PeraGraph) => any} = {\n        description: ChartTitleChoices.PATIENT_NAME,\n        returnFunc: (peraGraph: PeraGraph) => {\n            return peraGraph.displayName;\n        }\n    };\n\n    // Subject for the title selection\n    public chartTitleSubject$ = new BehaviorSubject<{description: string,\n        returnFunc: (peraGraph: PeraGraph) => any}>(this.selectedChartTitle);\n\n    private maxGraphCountPerGroup = 50;\n    private maxGraphsInDom = 150;\n    private currentTimestamp = null;\n    private displayTiles = false;\n    private peraGraphDefaultHeight = 145;\n    private peraGraphDefaultWidth = 185;\n    private peraGraphTileDefault = 75;\n    public peraGraphHeight: number = this.peraGraphDefaultHeight;\n    public peraGraphWidth: number = this.peraGraphDefaultWidth;\n    public startedRefresh$: Subject<void> = new Subject<void>();\n    public completedRefresh$: Subject<void> = new Subject<void>();\n    public tokenRefresh$: Subject<void> = new Subject<void>();\n\n    constructor(private http: HttpClient,\n                private configService: ArrayViewConfigService,\n                private filterService: FilterService,\n                private filterQueryRestService: FilterQueryRestService,\n                private flowsheetsApiService: FlowsheetsApiService,\n                private peragraphApiService: PeragraphApiService,\n                private sortService: SortService,\n                private groupService: GroupService,\n                private dateService: DateService) {\n    }\n\n    /**\n     * runs the peragraph through all the filters and returns true if none of them return false\n     * @param peraGraph - peragraph to evaluate\n     * @param filters - object of filter functions\n     */\n    filterPeragraph(peraGraph, filters): boolean {\n        // return true if filter object has no properties\n        if ((Object.keys(filters).length === 0 && filters.constructor === Object)) {\n            return true;\n        } else {\n            // traverse filter object and test peragraph against each filter until one returns false\n            for (const filter in filters) {\n                if (filters.hasOwnProperty(filter)) {\n                    if (!(filters[filter](peraGraph))) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n\n    /**\n     * limit the number of groups to load open on application of filtering/sorting/grouping based on the number of graphs in the dom\n     * @param peraGraphs - graphs to make count based off of\n     */\n    calculateNumberOfGroupsToShow(peraGraphs: PeraGraph[]): {groupsToShow: number, expanded: boolean} {\n        let groupsToShow = 0;\n        let graphCount = 0;\n        let expanded = true;\n        let numOfGroupsWithGraphs = 0;\n        // for each group, count the number of graphs in that group, capped at the maxGraphsPerGroup variable\n        // once the graphs exceed the maxGraphs in dom value return the number of groupstoShow to be applied to groups\n        for (const group of this.groupService.groupSubject$.value) {\n            let groupGraphCount = 0;\n            // helper variable for tracking how many groups have graphs\n            let groupIsFresh = true;\n            for(const peraGraph of peraGraphs) {\n                if(group.laneFunction(peraGraph)) {\n                    if(groupIsFresh) {\n                        numOfGroupsWithGraphs++;\n                        groupIsFresh = false;\n                    }\n                    groupGraphCount++;\n                    if(groupGraphCount >= this.maxGraphCountPerGroup) {\n                        break;\n                    }\n                }\n            }\n            graphCount += groupGraphCount;\n            groupsToShow++;\n            if (graphCount > this.maxGraphsInDom) {\n                groupsToShow--;\n                break;\n            }\n        }\n        return {groupsToShow: groupsToShow, expanded: numOfGroupsWithGraphs <= 1};\n    }\n\n    /**\n     * if sorting by RI Score...get RI Scores from server and append to peraGraphs\n     * @param peraGraphs - peraGraphs to have Ris attached to\n     */\n    addRIToPeraGraphs(peraGraphs: PeraGraph[]): Observable<PeraGraph[]> {\n        if (this.sortService.activeSortName === 'latestRi') {\n            return this.flowsheetsApiService.getAllRiScores().pipe(map((riScores) => {\n                const riMap = riScores.body;\n                for(const peraGraph of peraGraphs) {\n                    if (riScores.body[peraGraph.visitId]) {\n                        peraGraph.latestRi = riMap[peraGraph.visitId];\n                    }\n                }\n                return peraGraphs;\n            }));\n        } else {\n            return of(peraGraphs);\n        }\n    }\n\n    /**\n     * sorts peraGraphs based on function passed in through sort parameter then subsorts if needed based on the default sort method\n     * if no function is provided, the default sort function is used\n     * @param peraGraphA - peraGraph to be sorted\n     * @param peraGraphB - peraGraph to be sorted\n     * @param sortFunction - function to sort peraGraphs\n     */\n    sortGraphs(peraGraphA, peraGraphB, sortFunction?: (peragraphA: PeraGraph, peraGraphB: PeraGraph) => number) {\n        // default sort method for peragraphs\n        const defaultSort = function (peraGraphA: PeraGraph, peraGraphB: PeraGraph): number {\n            let comparison = 0;\n            if (peraGraphA.displayName > peraGraphB.displayName) {\n                comparison = 1;\n            } else if (peraGraphA.displayName < peraGraphB.displayName) {\n                comparison = -1;\n            }\n            return comparison;\n        };\n\n        if (this.sortService.nonStandardSortFunctionActive && this.sortService.nonStandardSortFunction) {\n           sortFunction = this.sortService.nonStandardSortFunction;\n        }\n\n        // if a function is passed in -> use it. if not use the default sort\n        if (!sortFunction) {\n            // if no function is provided, use default sort\n            return defaultSort(peraGraphA, peraGraphB)\n        }\n        let comparison;\n        comparison = sortFunction(peraGraphA, peraGraphB);\n        if (comparison == 0) {\n            comparison = defaultSort(peraGraphA, peraGraphB);\n        }\n        return comparison;\n    }\n\n    /**\n     * If a timestamp is provided by config use that, otherwise update the current timestamp every 5 seconds\n     */\n    calcCurrentTimestamp() {\n        if (this.configService.getCurrentTimestamp()) {\n            this.currentTimestamp = this.configService.getCurrentTimestamp();\n        }\n    }\n\n    /**\n     * returns the timestamp sent by the server if it isn't null\n     * otherwise calls Date.now() to get an up to date timestamp to\n     * return\n     */\n    public getCurrentTimestamp(): number {\n        /*\n            The currentTimestamp property is only set if the server sends a specific timestamp\n            it wants us to use. If that is not provided, we call Date.now() to get the up to date\n            timestamp every time this function is invoked\n        */\n        return this.currentTimestamp ? this.currentTimestamp : Date.now();\n    }\n\n    public isDisplayingTiles(): boolean {\n        return this.displayTiles;\n    }\n\n    public toggleTileView() {\n        // Toggle whether or not we display the tile view and set the width/height accordingly\n        this.displayTiles = !this.displayTiles;\n        this.peraGraphHeight = (this.displayTiles) ? this.peraGraphTileDefault : this.peraGraphDefaultHeight;\n        this.peraGraphWidth = (this.displayTiles) ? this.peraGraphTileDefault : this.peraGraphDefaultWidth;\n        this.refreshViewPort();\n    }\n\n    // Force a refresh of the viewport by toggling the data\n    public refreshViewPort() {\n        const previousPeraGraphs = this.peragraphApiService.getPeraGraphSubject().value;\n        this.peragraphApiService.getPeraGraphSubject().next([]);\n        setTimeout(() => {\n            this.peragraphApiService.getPeraGraphSubject().next(previousPeraGraphs);\n        }, 1);\n    }\n\n    /**\n     * Called on manual refresh or application of filters - refreshes graphs and FSCs\n     * and fires completedRefresh$ Subject upon completion\n     */\n    public refreshGraphs(getFilterQuery?: boolean) {\n        this.startedRefresh$.next();\n        if (getFilterQuery) {\n            // we use fork join here to combine the REST calls for server side filtering and getting new PeraGraphs\n            // quick aside on fork join - all it does is wait for both observables to COMPLETE and then feed you both results\n            // before getting to the fork join the vnms from the server side filter query are stored in the filter service\n            //      -> this is done to ensure that once the forkjoin completes, client side filtering can commence\n            // after filtering the graphs, they are passed to the array view per usual\n            forkJoin(this.filterQueryRestService.getFilteredVisits(this.filterService.getActiveServerFilterCriteria()), this.peragraphApiService.getAllPeragraphs()).subscribe((graphsAndFilteredVisits) => {\n                this.peragraphApiService.getPeraGraphSubject().next(graphsAndFilteredVisits[1]);\n                this.filterService.serverFilteredVisits = graphsAndFilteredVisits[0];\n                this.filterService.filterSubject$.next(this.filterService.activeFilters);\n                this.completedRefresh$.next();\n            });\n        } else {\n            // if we don't need to do server side filtering -> filter in the client immediately\n            this.peragraphApiService.getAllPeragraphs().subscribe((graphs) => {\n                this.peragraphApiService.getPeraGraphSubject().next(graphs);\n            });\n        }\n        this.flowsheetsApiService.getAllPeraGraphFlowSheets().subscribe((flowsheets) => this.flowsheetsApiService.getFlowSheetSubject().next(flowsheets.body));\n    }\n\n}\n","export enum WarningColors {\n    VeryHigh = '#D51C19',\n    High = '#EE834C',\n    Medium = '#F6CC5D',\n    NoCurrent = '#3185B8',\n    NoRi = '#AAABAC',\n}\n","import {Injectable} from '@angular/core';\nimport {WarningColors} from '../../../model/WarningColors';\nimport {NgbPopover} from '@ng-bootstrap/ng-bootstrap';\nimport {Subject} from 'rxjs';\nimport {PeraGraph} from 'ng-common-library';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PeraGraphService {\n    // Subject for navigating to the PSG\n    public graphClicked$: Subject<PeraGraph> = new Subject<PeraGraph>();\n\n    // The currently displayed tooltip\n    // NOTE: This was implemented to solve a problem where multiple tooltips would be open at the same time\n    public tooltip: NgbPopover;\n\n    constructor() {\n    }\n\n    public graphClickedEvent(graph: PeraGraph) {\n        this.closeToolTip();\n        this.graphClicked$.next(graph);\n    }\n\n    public getBackgroundColorByWarningAndRi(warning, latestRi: number, isDischarged: boolean): string {\n        let backgroundColor;\n        if (warning && !isDischarged) {\n            switch (warning.category) {\n                case 'V':\n                    backgroundColor = WarningColors.VeryHigh;\n                    break;\n                case 'H':\n                    backgroundColor = WarningColors.High;\n                    break;\n                case 'M':\n                    backgroundColor = WarningColors.Medium;\n                    break;\n            }\n        } else if (latestRi && !isDischarged) {\n            backgroundColor = WarningColors.NoCurrent;\n        } else {\n            backgroundColor = WarningColors.NoRi;\n        }\n\n        return backgroundColor;\n    }\n\n    public getRiScoreToDisplay(latestRi: number): string {\n        return (latestRi) ? latestRi + '' : '--';\n    }\n\n    closeToolTip() {\n        if (this.tooltip && this.tooltip.isOpen) {\n            this.tooltip.close();\n        }\n    }\n}\n","import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PriorWarningsConfigService {\n\n  private priorWarningEndPoint: string;\n\n  constructor() {\n  }\n\n  setPriorWarningEndPoint(value: string): void {\n    this.priorWarningEndPoint = value;\n  }\n\n  getPriorWarningEndPoint(): string {\n    return this.priorWarningEndPoint;\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {PriorWarningsConfigService} from '../config/prior-warnings-config.service';\nimport {BehaviorSubject, Observable, timer} from 'rxjs';\nimport {switchMap} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PriorWarningsApiService {\n\n  private readonly _priorWarningSubject: BehaviorSubject<Map<number, string>>;\n  private pollInstance$: Observable<any>;\n\n  constructor(private http: HttpClient,\n              private priorWarningsConfigService: PriorWarningsConfigService) {\n    this.pollInstance$ = timer(0, 60000);\n    this._priorWarningSubject = new BehaviorSubject<Map<number, string>>(null);\n  }\n\n  public getPriorWarningSubjectValue() {\n    return this._priorWarningSubject.value;\n  }\n\n  public getPriorWarningSubject() {\n    return this._priorWarningSubject;\n  }\n\n  getPriorWarnings(): Observable<any> {\n    return this.http.get(this.priorWarningsConfigService.getPriorWarningEndPoint(), {observe: 'response'});\n  }\n\n  public getPriorWarningInterval() {\n    return this.pollInstance$.pipe(\n      switchMap(() => this.getPriorWarnings()));\n  }\n\n}\n","import {\n    AfterViewChecked,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    ViewChild\n} from '@angular/core';\nimport {ArrayViewService} from './service/array-view.service';\nimport {BehaviorSubject, combineLatest, of} from 'rxjs';\nimport {filter, first, map, mergeMap, tap} from 'rxjs/operators';\nimport {PeraGraphService} from './group/pera-graph/service/pera-graph.service';\nimport {ArrayViewConfigService} from './service/array-view-config.service';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\nimport {PriorWarningsConfigService} from './service/prior-warnings/config/prior-warnings-config.service';\nimport {PriorWarningsApiService} from './service/prior-warnings/api/prior-warnings-api.service';\nimport {FlowsheetsApiService, PeragraphApiService} from 'ng-common-library';\nimport {FilterService, SortService, GroupService} from 'ng-filters-library';\n\n@Component({\n    selector: 'phlib-array-view',\n    templateUrl: './array-view.component.html',\n    styleUrls: ['./array-view.component.css']\n})\nexport class ArrayViewComponent implements OnInit, OnDestroy, OnChanges, AfterViewChecked {\n\n    private peraGraphSubscription;\n    private flowSheetSubscription;\n    private priorWarningSubscription;\n    private filteredPeraGraphsSubscription;\n\n    // collects all the peraGraphs from their input sources combines them, filters them, and then passes them onto the groups\n    filteredPeraGraphs$ = new BehaviorSubject<PeraGraph[]>([]);\n\n    @Input()\n    peraGraphSortingFunction: (firstGraph: PeraGraph, secondGraph: PeraGraph) => number;\n\n    @Input()\n    peraGraphTitleFunction: (graph: PeraGraph) => string;\n\n    groups$;\n\n    @Input()\n    disableGroups: boolean;\n\n    @Input()\n    numGroupsDisplay: BehaviorSubject<number>;\n\n    @Input()\n    peraGraphHeight: number;\n\n    @Input()\n    peraGraphWidth: number;\n\n    @ViewChild('arrayView')\n    arrayViewElementRef: ElementRef;\n\n    scrollContainerWidth: string;\n\n    expandedSubject$: BehaviorSubject<boolean>;\n\n    constructor(public arrayViewService: ArrayViewService,\n                private arrayViewConfigService: ArrayViewConfigService,\n                private peragraphApiService: PeragraphApiService,\n                private filterService: FilterService,\n                private flowsheetsApiService: FlowsheetsApiService,\n                private priorWarningsConfigService: PriorWarningsConfigService,\n                private priorWarningsApiService: PriorWarningsApiService,\n                private peraGraphService: PeraGraphService,\n                private sortService: SortService,\n                private groupService: GroupService,\n                private ref: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.numGroupsDisplay = this.groupService.changeNumberOfGroupsToShow$;\n        this.expandedSubject$ = this.groupService.expandGroups$;\n        this.groups$ = this.groupService.groupSubject$;\n        // Load the configuration for the array view and subscribe to the PeraGraphs and Flowsheet services.\n        this.arrayViewConfigService.configurationLoaded$.pipe(filter((isReady: boolean) => isReady), first()).subscribe(() => this.initializeArrayView());\n\n        this.updateBehaviorBasedOnInputs();\n    }\n\n    initializeArrayView() {\n\n        // Once we have the configuration, we can get the rest of the information that we need\n        this.arrayViewService.calcCurrentTimestamp();\n\n        // get all Peragraphs on an interval and push them into the peraGraphSubject to be filtered\n        this.peraGraphSubscription = this.peragraphApiService.getPeraGraphInterval().subscribe(\n            peraGraphs => {\n                this.peragraphApiService.getPeraGraphSubject().next(peraGraphs);\n            }\n        );\n\n        // uses combineLatest to update the array view when either new graphs are added (peraGraph Subject - sourced by peraGraphInterval and manual graph refreshes) or new filters are added (filterSubject)\n        // and then filters before pushing to groups\n        this.filteredPeraGraphsSubscription = combineLatest(this.peragraphApiService.getPeraGraphSubject(), this.filterService.filterSubject$).pipe(\n            map((peraGraphsAndFilters) => peraGraphsAndFilters[0].filter(peraGraph =>\n            this.arrayViewService.filterPeragraph(peraGraph, this.filterService.activeFilters))\n        ), mergeMap((peraGraphs) => this.arrayViewService.addRIToPeraGraphs(peraGraphs)\n        ), map((peraGraphs: PeraGraph[]) => peraGraphs.sort((peraGraphA: PeraGraph, peraGraphB: PeraGraph) => this.arrayViewService.sortGraphs(peraGraphA, peraGraphB, this.sortService.activeSortFunction)\n        )), tap((peraGraphs: PeraGraph[]) => {\n            // if this iteration of the filtered graphs subject was triggered by the apply filters button\n            // then recalculate and close the proper groups\n            // if generated by refresh button or interval, don't reset the closed groups\n            const groupDisplay: {groupsToShow: number, expanded: boolean} = this.arrayViewService.calculateNumberOfGroupsToShow(peraGraphs);\n            if (this.groupService.changeGroupsClosed) {\n                this.groupService.changeNumberOfGroupsToShow$.next(groupDisplay.groupsToShow);\n                this.groupService.changeGroupsClosed = false;\n            }\n            this.groupService.expandGroups$.next(groupDisplay.expanded);\n        })).subscribe((peraGraphs: PeraGraph[]) => {\n            // Assign an index to the anonymous property of the PeraGraph - used by the Anonymous Patient chart title.\n            let anonymousIndex = 1;\n            peraGraphs.forEach(graph => {\n                graph.anonymous = anonymousIndex;\n                anonymousIndex++;\n            });\n            this.filteredPeraGraphs$.next(peraGraphs);\n            this.arrayViewService.completedRefresh$.next();\n\n            // Push the new Chart title selection through the Subject.\n            this.arrayViewService.chartTitleSubject$.next(this.arrayViewService.selectedChartTitle);\n        });\n\n        // Whenever we get new FSCs (on an interval) push them out through the subject so the groups receive the updated map of FSCs\n        this.flowSheetSubscription = this.flowsheetsApiService.getFlowSheetInterval().subscribe(\n            flowsheets => this.flowsheetsApiService.getFlowSheetSubject().next(flowsheets.body));\n\n        // Whenever we get new prior warnings (on an interval) push them out through the subject so the groups receive the updated map of warnings\n        if (this.priorWarningsConfigService.getPriorWarningEndPoint()) {\n            this.priorWarningSubscription = this.priorWarningsApiService.getPriorWarningInterval().subscribe(\n                priorWarnings => this.priorWarningsApiService.getPriorWarningSubject().next(priorWarnings.body));\n        }\n    }\n\n    ngAfterViewChecked(): void {\n        if (this.scrollContainerWidth !== this.getScrollContainerWidth()) {\n            this.scrollContainerWidth = this.getScrollContainerWidth();\n            if (this.ref) {\n                this.ref.detectChanges();\n            }\n        }\n    }\n\n    /**\n     * Used to dynamically set the width of the scroll container (based on the width of the array view component)\n     */\n    public getScrollContainerWidth(): string {\n        const width = this.arrayViewElementRef.nativeElement.offsetWidth;\n        // Ensure that the container has padding\n        const padding = width * .11;\n        // Get the number of graphs that we should be able to display in the window (taking the padding into account)\n        const numGraphsInRow = Math.floor((width - padding) / this.arrayViewService.peraGraphWidth);\n        // Return the width\n        return numGraphsInRow * this.arrayViewService.peraGraphWidth + 'px';\n    }\n\n    ngOnChanges() {\n        this.updateBehaviorBasedOnInputs();\n        // TODO update this when we add the ability to change the title/grouping/sorting\n    }\n\n    /**\n     * Updates the fields in the array view service and in this component based on the input so that we see the desired behavior\n     */\n    private updateBehaviorBasedOnInputs() {\n        this.disableGroupsIfAppropriate();\n        this.setPeraGraphSortingFunction();\n        this.updatePeraGraphDimensions();\n    }\n\n    /**\n     * If we pass in an explicit width/height, use them\n     */\n    private updatePeraGraphDimensions() {\n        if (this.peraGraphHeight && this.peraGraphWidth) {\n            this.arrayViewService.peraGraphWidth = this.peraGraphWidth;\n            this.arrayViewService.peraGraphHeight = this.peraGraphHeight;\n            this.arrayViewService.refreshViewPort();\n        }\n    }\n\n    /**\n     * This sets the array view service's sorting function to the input passed to the array view component\n     */\n    private setPeraGraphSortingFunction() {\n        if (this.peraGraphSortingFunction) {\n            this.arrayViewService.sortGraphs = this.peraGraphSortingFunction;\n        }\n    }\n\n    /**\n     * If groups are disabled or absent, add a single group that will catch all graphs and not display a header\n     */\n    private disableGroupsIfAppropriate() {\n        // If groups are disabled or if we don't have groups\n        if (this.disableGroups || this.groups$ == null) {\n            this.groups$ = of([[null, function (peraGraph: PeraGraph) {\n                return true;\n            }]]);\n        }\n    }\n\n    // not sure if this is needed since we are using combinedLatest above but I left it just in case\n    // public filterChanged() {\n    //   // Get the current list of PeraGraphs without making another call\n    //   let peraGraphs = this.peragraphApiService.getPeraGraphSubject().value;\n    //   // Filter the list according to the updated matchesFilter function within the arrayView service\n    //   peraGraphs = this.arrayViewService.filterPeragraphs(peraGraphs, this.filterService.activeFilters)\n    //   // Publish result to all subscribing groups\n    //   this.peragraphApiService.getPeraGraphSubject().next(peraGraphs);\n    // }\n\n    ngOnDestroy() {\n        if (this.ref) {\n            this.ref.detach();\n            this.ref = null;\n        }\n        if (this.peraGraphSubscription && !this.peraGraphSubscription.closed) {\n            this.peraGraphSubscription.unsubscribe();\n        }\n        if (this.flowSheetSubscription && !this.flowSheetSubscription.closed) {\n            this.flowSheetSubscription.unsubscribe();\n        }\n        if (this.priorWarningSubscription && !this.priorWarningSubscription.closed) {\n            this.priorWarningSubscription.unsubscribe();\n        }\n        if (this.filteredPeraGraphsSubscription && !this.filteredPeraGraphs$.closed) {\n            this.filteredPeraGraphsSubscription.unsubscribe();\n        }\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component, ElementRef, HostBinding,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit, Renderer2\n} from '@angular/core';\nimport {ArrayViewService} from '../service/array-view.service';\nimport {BehaviorSubject, Observable, Subscription} from 'rxjs';\nimport {map, tap} from 'rxjs/operators';\nimport {ResizeEvent} from 'angular-resizable-element';\nimport {PeraGraphService} from './pera-graph/service/pera-graph.service';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\nimport {PeragraphApiService} from 'ng-common-library';\nimport {FilterService} from \"ng-filters-library\";\n\n@Component({\n    selector: 'phlib-group',\n    templateUrl: './group.component.html',\n    styleUrls: ['./group.component.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GroupComponent implements OnInit, OnChanges, OnDestroy {\n\n    @Input()\n    public showPeraGraphs = false;\n    @Input()\n    expanded = false;\n    @Input()\n    public group: { laneFunction: (peraGraph: PeraGraph) => boolean, laneTitle: string };\n    @Input()\n    public peraGraphHeight: number;\n    @Input()\n    public peraGraphWidth: number;\n    @Input()\n    public scrollContainerWidth: string;\n    @Input()\n    public filteredPeraGraphs$: BehaviorSubject<PeraGraph[]>;\n\n    // Group information\n    public groupName: string;\n    private filterFunction = null;\n\n    // Default number of rows - TODO possibly make this configurable, or remember the user's last selection and save it\n    private nonExpandedRows = 3;\n    private expandedRows = 6;\n    private currentNumberOfRowsDisplayed = this.nonExpandedRows;\n\n    // Observables\n    public peraGraphs$: Observable<Array<PeraGraph>>;\n    public peraGraphs_length$: Subscription;\n    options$ = new BehaviorSubject<{ itemHeight: number, itemWidth: number, numAdditionalRows: number }>(null);\n\n    // Maintained to determine chart equality\n    private previousPeraGraphs: Array<PeraGraph>;\n    private currentPeraGraphs: Array<PeraGraph>;\n\n    // Displayed in the header\n    public groupLength: number;\n\n    // Differentiate between a single click and a double click\n    private clickTimer = 0;\n    private preventSingleClick = false;\n\n    // Allows for simple resizing of the viewport\n    private viewContainerMaxHeight: string;\n    public style: object = {maxHeight: this.viewContainerMaxHeight};\n\n    public hideGroup = false;\n\n    constructor(private arrayViewService: ArrayViewService,\n                private filterService: FilterService,\n                private peraGraphService: PeraGraphService,\n                private peragraphApiService: PeragraphApiService,\n                private ref: ChangeDetectorRef,\n                private elementRef: ElementRef,\n                private renderer: Renderer2) {\n    }\n\n    // TODO break pieces out into a service as appropriate\n\n    ngOnInit() {\n        // Set the group information\n        this.groupName = this.group.laneTitle;\n        this.filterFunction = this.group.laneFunction;\n        this.updatePeraGraphs();\n        if (this.expanded) {\n            this.currentNumberOfRowsDisplayed = this.expandedRows\n        } else {\n            this.currentNumberOfRowsDisplayed = this.nonExpandedRows;\n        }\n    }\n\n    ngOnChanges() {\n        this.updateNumberOfItemsInViewport();\n        // Identify the ideal width, and set both it and the height through ng-style on the viewport container\n        this.updateViewPortPerCurrentRows();\n        this.updatePeraGraphs();\n        this.maintainGroupLength();\n    }\n\n    hideOrDisplayGroup() {\n        if (this.elementRef) {\n            if (this.groupLength === 0) {\n                this.renderer.setStyle(this.elementRef.nativeElement, 'display', 'none');\n            } else {\n                this.renderer.setStyle(this.elementRef.nativeElement, 'display', 'block');\n            }\n        }\n    }\n\n    private updatePeraGraphs() {\n        this.peraGraphs$ = this.filteredPeraGraphs$.pipe(\n            map(peraGraphs => peraGraphs.filter(peraGraph => this.matchesGroup(peraGraph))),\n            tap(peraGraphs => {\n                // Used to determine equality for virtual scrolling\n                this.previousPeraGraphs = this.currentPeraGraphs;\n                this.currentPeraGraphs = peraGraphs;\n                // Specifies the number of graphs in a group\n                this.groupLength = peraGraphs.length;\n                this.hideOrDisplayGroup();\n            }));\n    }\n\n    /**\n     * When we're not displaying PeraGraphs, we don't pass the observable to the virtual scroll which typically populates the group length.\n     * This function will conditionally get the group length through other means.\n     */\n    maintainGroupLength() {\n        if (!this.showPeraGraphs) {\n            // If we're not showing peraGraphs, subscribe separately so that we can get the group length\n            this.peraGraphs_length$ = this.filteredPeraGraphs$.pipe(map(peraGraphs =>\n                peraGraphs.filter(peraGraph => this.matchesGroup(peraGraph)))).subscribe((peraGraphs) => {\n                this.groupLength = peraGraphs.length;\n                this.hideOrDisplayGroup();\n                if (this.ref) {\n                    this.ref.detectChanges();\n                }\n            });\n        } else if (this.peraGraphs_length$ && !this.peraGraphs_length$.closed) {\n            // If we're showing peraGraphs, there's no need for this subscription\n            this.peraGraphs_length$.unsubscribe();\n        }\n    }\n\n    /**\n     * This function determines which graphs belong to this group\n     *\n     * @param peraGraph\n     * @returns\n     */\n    matchesGroup(peraGraph: PeraGraph): boolean {\n        if (this.filterFunction) {\n            return this.filterFunction(peraGraph);\n        }\n        return true;\n    }\n\n    /**\n     * Function to determine equality, given two indicies in the array (optional, default: (p,c) => p === c))\n     *\n     * @param prevDataIndex\n     * @param curDataIndex\n     * @returns\n     */\n    equals = (prevDataIndex: number, curDataIndex: number) => {\n        const curPeraGraph = this.currentPeraGraphs[curDataIndex];\n        const previousPeraGraph = (this.previousPeraGraphs) ? this.previousPeraGraphs[prevDataIndex] : null;\n        /*\n         Most browsers maintain the order of the fields so this should work in most cases and when it fails, it'll just return false so anything\n         else is an optimization\n         */\n        return previousPeraGraph != null && curPeraGraph != null && JSON.stringify(previousPeraGraph) === JSON.stringify(curPeraGraph);\n    };\n\n    /**\n     * Called when the viewport is being resized manually\n     *\n     * @param event\n     */\n    onResizing(event: ResizeEvent): void {\n        // Set the height according to the event\n        this.viewContainerMaxHeight = event.rectangle.height + 'px';\n        // Set the number of rows that should be displayed according to the new height\n        this.currentNumberOfRowsDisplayed = Math.ceil(event.rectangle.height / this.peraGraphHeight);\n        this.updateViewPortPerCurrentRows();\n    }\n\n    /**\n     * Called when the header is clicked\n     */\n    click() {\n        this.preventSingleClick = false;\n        // @ts-ignore\n        this.clickTimer = setTimeout(() => {\n            if (!this.preventSingleClick) {\n                this.toggleShow();\n                if (this.ref) {\n                    this.ref.detectChanges();\n                }\n            }\n        }, 200);\n    }\n\n    /**\n     * Called when the header is double clicked\n     */\n    doubleClick() {\n        clearTimeout(this.clickTimer);\n        this.preventSingleClick = true;\n        this.toggleExpand();\n    }\n\n    /**\n     * Updates the height/width of the viewport container as well as the height/width/number of items in the viewport\n     */\n    updateViewPortPerCurrentRows() {\n        if (this.expanded) {\n            this.currentNumberOfRowsDisplayed = this.expandedRows\n        } else {\n            this.currentNumberOfRowsDisplayed = this.nonExpandedRows;\n        }\n        // Set the height of the container from the number of rows that should be displayed\n        this.viewContainerMaxHeight = this.getViewPortHeightFromRowsAsString(this.currentNumberOfRowsDisplayed);\n        this.setStyle(this.viewContainerMaxHeight);\n        // Update the options so that the correct number of rows are displayed in the viewport\n        this.updateNumberOfItemsInViewport();\n    }\n\n    /**\n     * Toggles whether or not any PeraGraphs are shown in the group\n     */\n    toggleShow() {\n        // Switch from removing the element from the DOM via ngIf to using the hidden attribute once it's rendered once\n        this.hideGroup = (this.showPeraGraphs) ? !this.hideGroup : false;\n        this.arrayViewService.tokenRefresh$.next();\n\n        // If we have never displayed PeraGraphs in this group\n        if (!this.showPeraGraphs) {\n            // Start rendering graphs for the first time\n            this.startRenderingPeraGraphs();\n        }\n    }\n\n    /**\n     * This function toggles expansion of the viewport height\n     */\n    toggleExpand() {\n        this.arrayViewService.tokenRefresh$.next();\n        this.expanded = !this.expanded;\n        // Update the number of rows being displayed according to the current expanded status\n        this.currentNumberOfRowsDisplayed = (this.expanded) ? this.expandedRows : this.nonExpandedRows;\n        // Update the viewport\n        this.updateViewPortPerCurrentRows();\n        // If we're not showing graphs, show them\n        if (!this.showPeraGraphs || this.hideGroup) {\n            this.hideGroup = false;\n            // If we have never displayed peragraphs in this group\n            if (!this.showPeraGraphs) {\n                // Start rendering graphs for the first time\n                this.startRenderingPeraGraphs();\n            }\n        }\n    }\n\n    /**\n     * If ngIf is currently evaluating to false, trigger a change and update the view container\n     */\n    startRenderingPeraGraphs() {\n        this.showPeraGraphs = true;\n        this.updateViewPortPerCurrentRows();\n        if (this.ref) {\n            this.ref.detectChanges();\n        }\n    }\n\n    /**\n     * Updates item size and the number of rows being rendered\n     */\n    updateNumberOfItemsInViewport() {\n        this.options$.next({\n            itemHeight: this.peraGraphHeight,\n            itemWidth: this.peraGraphWidth,\n            numAdditionalRows: this.getNumberOfRowsToRender()\n        });\n    }\n\n    /**\n     * Applies a buffer to the number of rows being displayed to improve scrolling performance\n     *\n     * @returns\n     */\n    getNumberOfRowsToRender(): number {\n        const additionalRowsToRender = (this.arrayViewService.isDisplayingTiles()) ? 100 : 2;\n        return this.currentNumberOfRowsDisplayed + additionalRowsToRender;\n    }\n\n    /**\n     * Set the height and width of the viewport container\n     *\n     * @param height\n     */\n    setStyle(height: string) {\n        this.style = {\n            maxHeight: height,\n            width: this.scrollContainerWidth\n        };\n    }\n\n    /**\n     * Returns the ideal viewport height for the number of rows passed to the function\n     *\n     * @param rows\n     * @returns\n     */\n    getViewPortHeightFromRowsAsString(rows: number): string {\n        return this.peraGraphHeight * rows + 'px';\n    }\n\n    ngOnDestroy(): void {\n        if (this.ref) {\n            this.ref.detach();\n            this.ref = null;\n        }\n        this.filterFunction = null;\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {ArrayViewService} from '../../../service/array-view.service';\nimport {first} from 'rxjs/operators';\nimport {TooltipInfo} from '../../../model/TooltipInfo';\nimport {PeraGraphService} from './pera-graph.service';\nimport {ArrayViewConfigService} from '../../../service/array-view-config.service';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\nimport {LoginService} from 'ng-login-library';\nimport {TokenApiService} from 'ng-common-library';\nimport {Subject} from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TooltipService {\n\n    public toolTipInfoUpdated$: Subject<TooltipInfo> = new Subject<TooltipInfo>();\n\n    constructor(private graphService: PeraGraphService,\n                private arrayViewService: ArrayViewService,\n                private http: HttpClient,\n                private loginService: LoginService,\n                private tokenApiService: TokenApiService,\n                private arrayViewConfigService: ArrayViewConfigService) {\n    }\n\n    updateToolTipInfo(graph: PeraGraph) {\n        this.tokenApiService.refreshToken(this.loginService.getCurrentUser());\n        // Get the current tooltip info from the server.\n        this.http.get(this.arrayViewConfigService.getToolTipInfoEndPoint() + '/pid/' + graph.patient.pid + '/visit/' + graph.visitId).pipe(first()).subscribe((toolTipInfo: TooltipInfo) => {\n            // Ensure that the user hasn't moved onto a new graph with a different during the time that the call was made to the server\n            if (graph.visitId === toolTipInfo.visitId) {\n                const numberOfOtherVisitsWithValidRi = toolTipInfo.numberOfOtherVisitsWithValidRi;\n                // The query will return a -1 value if the current and only visit has no valid RI scores.\n                graph.numberVisitsWithValidRI = (numberOfOtherVisitsWithValidRi > 0) ? numberOfOtherVisitsWithValidRi : 0;\n                // Tooltip diagnosis formatting\n                if (toolTipInfo.diagnosis != null) {\n                    // Replace the first ^ with nothing\n                    const tmpDiag = toolTipInfo.diagnosis.replace('^', '');\n                    // Replace the rest of the ^ with ', '\n                    graph.diagnosis = tmpDiag.replace(/\\^/g, ', ');\n                }\n                this.toolTipInfoUpdated$.next(toolTipInfo);\n            }\n        });\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    SimpleChanges\n} from '@angular/core';\nimport {ArrayViewService} from '../../service/array-view.service';\nimport {PeraGraphService} from './service/pera-graph.service';\nimport {NgbPopover} from '@ng-bootstrap/ng-bootstrap';\nimport {HttpClient} from '@angular/common/http';\nimport {TooltipService} from './service/tooltip.service';\nimport {Subscription} from 'rxjs';\nimport {FlowsheetsApiService, PeraGraph, UsageApiService, UsageType} from 'ng-common-library';\nimport {PriorWarningsApiService} from '../../service/prior-warnings/api/prior-warnings-api.service';\nimport {FlowSheetBase} from 'ng-common-library/lib/model/FlowSheetBase';\nimport {TooltipInfo} from '../../model/TooltipInfo';\n\n@Component({\n    selector: 'phlib-pera-graph',\n    templateUrl: './pera-graph.component.html',\n    styleUrls: ['./pera-graph.component.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PeraGraphComponent implements OnInit, OnDestroy, OnChanges {\n\n    @Input()\n    public graph: PeraGraph;\n\n    @Input()\n    public peraGraphWidth: number;\n\n    @Input()\n    public peraGraphHeight: number;\n\n    public style;\n    private margin = 10;\n\n    public flowsheets: Array<FlowSheetBase>;\n    public priorWarning: string;\n    private flowSheetMap$: Subscription;\n    private priorWarningMap$: Subscription;\n    private toolTipInfoEvent$: Subscription;\n    public latestRi: number;\n    private isMouseOverPeraGraph = false;\n    private tooltip: NgbPopover;\n\n    constructor(public service: ArrayViewService,\n                private flowsheetsApiService: FlowsheetsApiService,\n                private priorWarningsApiService: PriorWarningsApiService,\n                private usageService: UsageApiService,\n                private graphService: PeraGraphService,\n                private toolTipService: TooltipService,\n                private http: HttpClient,\n                private ref: ChangeDetectorRef) {\n    }\n\n    ngOnInit() {\n        this.subscribeToPeraGraphDataFeeds();\n        this.subscribeToToolTipInfoEvent();\n        this.style = {\n            width: this.peraGraphWidth - this.margin + 'px',\n            height: this.peraGraphHeight - this.margin + 'px'\n        };\n        this.usageService.addUsageData(this.graph, UsageType.Array);\n        // Manage change detection explicitly\n        this.ref.detach();\n    }\n\n    /**\n     * Subscribe to the interval observables/subjects that pass information the PeraGraph needs\n     *\n     * Currently, this includes prior warnings and flowsheets\n     */\n    subscribeToPeraGraphDataFeeds() {\n        this.flowSheetMap$ = this.flowsheetsApiService.getFlowSheetSubject().subscribe((fscMap) => {\n            this.getFlowSheetsForVisit(fscMap);\n            if (this.ref) {\n                this.ref.detectChanges();\n            }\n        });\n\n        this.priorWarningMap$ = this.priorWarningsApiService.getPriorWarningSubject().subscribe((pwMap) => {\n            this.getPriorWarningsForVisit(pwMap);\n            if (this.ref) {\n                this.ref.detectChanges();\n            }\n        });\n    }\n\n    subscribeToToolTipInfoEvent() {\n        this.toolTipInfoEvent$ = this.toolTipService.toolTipInfoUpdated$.subscribe((toolTipInfo: TooltipInfo) => {\n            // Ensure that the user hasn't moved onto a new graph with a different during the time that the call was made to the server\n            if (this.isMouseOverPeraGraph && toolTipInfo.visitId === this.graph.visitId) {\n                // If the service takes a second to respond and the popover is no longer there, don't try to open it\n                if (this.tooltip) {\n                    this.graphService.tooltip = this.tooltip;\n                    this.tooltip.open();\n                }\n                if (this.ref) {\n                    this.ref.detectChanges();\n                }\n            }\n        });\n    }\n\n    /**\n     * This only fires when the user passes the mouse over the graph to get the tooltip.\n     * For those graphs, force a change detection cycle so that the ToolTip component updates.\n     */\n    mouseEnterHandler(po: NgbPopover): void {\n        if (!this.isMouseOverPeraGraph && !po.isOpen()) {\n            this.isMouseOverPeraGraph = true;\n            this.tooltip = po;\n            if (this.graph) {\n                // Close any existing tooltip\n                this.graphService.closeToolTip();\n                this.toolTipService.updateToolTipInfo(this.graph);\n            }\n        }\n    }\n\n    /**\n     * This fires when the user passes the mouse over the graph, and then moves the mouse off of the graph\n     * For those graphs, close the tooltip\n     *\n     * @param po\n     */\n    mouseLeaveHandler(po: NgbPopover): void {\n        this.isMouseOverPeraGraph = false;\n        if (po.isOpen()) {\n            po.close();\n        }\n    }\n\n    graphClicked(graph: PeraGraph) {\n        if (this.tooltip && this.tooltip.isOpen()) {\n            // console.log('Forcefully closing tooltip');\n            this.tooltip.close();\n            this.tooltip = null;\n        }\n        this.graphService.graphClickedEvent(graph);\n        this.service.tokenRefresh$.next();\n    }\n\n    isShown(po: NgbPopover): void {\n        if (!this.tooltip) {\n            // Closing tooltip\n            setTimeout(() => po.close(), 1);\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // If the item size changed, update style\n        if (changes && changes.peraGraphWidth && changes.peraGraphWidth.previousValue !== changes.peraGraphWidth.currentValue) {\n            this.style = {\n                width: this.peraGraphWidth - this.margin + 'px',\n                height: this.peraGraphHeight - this.margin + 'px'\n            };\n        }\n\n        // If the graph changed, update the related data so that we're showing the right information\n        if (changes &&\n            changes.graph &&\n            changes.graph.currentValue !== changes.graph.previousValue &&\n            !changes.graph.firstChange &&\n            changes.graph.currentValue.visitId !== changes.graph.previousValue.visitId) {\n\n            // console.log('ArrayView change: Adding usage data for ' + this.graph.vnm);\n            this.usageService.addUsageData(this.graph, UsageType.Array);\n\n            // The graph that we're displaying changed so get the new FSCs from the map\n            const fscMap = this.flowsheetsApiService.getFlowSheetSubjectValue();\n            this.getFlowSheetsForVisit(fscMap);\n            // Get the prior warning for this graph instead of the stale graph\n            const priorWarnings = this.priorWarningsApiService.getPriorWarningSubjectValue();\n            this.getPriorWarningsForVisit(priorWarnings);\n            // Push the changes\n            if (this.ref) {\n                this.ref.detectChanges();\n            }\n        }\n    }\n\n    getFlowSheetsForVisit(fscMap) {\n        if (fscMap) {\n            const fsc = fscMap[this.graph.visitId];\n            // Update the RI-related fields if necessary\n            if (fsc && !(this.flowsheets === fsc) && JSON.stringify(this.flowsheets) !== JSON.stringify(fsc)) {\n                // Note this may trigger extra changes based on how browsers handle JSON object order\n                this.flowsheets = fsc;\n                this.latestRi = fsc[this.flowsheets.length - 1].riScore;\n            } else if (!fsc && this.flowsheets !== null) {\n                // Clear the RI-related fields\n                this.flowsheets = [];\n                this.latestRi = null;\n            }\n        }\n    }\n\n    getPriorWarningsForVisit(priorWarnings) {\n        if (priorWarnings) {\n            const pw = priorWarnings[this.graph.visitId];\n            // TODO can we set this.priorWarning = pw without the logic below?\n            // If we have a prior warning and it's not the same, trigger a change\n            if (pw && pw !== this.priorWarning) {\n                this.priorWarning = pw;\n            } else if (!pw) {\n                // No prior warning exists, update our prior warning to reflect this\n                this.priorWarning = null;\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.ref) {\n            this.ref.detach();\n            this.ref = null;\n        }\n        // Unsubscribe when the component is destroyed\n        if (this.flowSheetMap$ && !this.flowSheetMap$.closed) {\n            this.flowSheetMap$.unsubscribe();\n        }\n        if (this.priorWarningMap$ && !this.priorWarningMap$.closed) {\n            this.priorWarningMap$.unsubscribe();\n        }\n        if (this.toolTipInfoEvent$ && !this.toolTipInfoEvent$.closed) {\n            this.toolTipInfoEvent$.unsubscribe();\n        }\n    }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\n\nimport * as moment_ from 'moment-timezone';\nimport {ArrayViewService} from '../../../service/array-view.service';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\nimport {ChartService, DateService} from 'ng-common-library';\nimport {FlowSheetBase} from 'ng-common-library/lib/model/FlowSheetBase';\n\ndeclare var require: any;\nconst Highcharts = require('highcharts');\n\n// The JavaScript compiler gives a weird \"moment cannot be used as a namespace\" type of error\n// This is the workaround...\nconst moment = moment_;\n\n@Component({\n  selector: 'phlib-chart',\n  templateUrl: './chart.component.html',\n  styleUrls: ['./chart.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ChartComponent implements OnInit, OnChanges, OnDestroy {\n  @Input()\n  flowsheets: Array<FlowSheetBase>;\n\n  @Input()\n  public graph: PeraGraph;\n\n  @Input()\n  currentTimestamp: number;\n\n  Highcharts = Highcharts;\n  chartOptions;\n\n  X_AXIS_DAYS = 5;\n  DAY_IN_MILLISECONDS = 86400000;\n\n  minRiScore = 0;\n  minRecordedDt = 999999999999999999999;\n  maxRecordedDt = 0;\n\n  series;\n\n  constructor(private dateService: DateService,\n              private chartService: ChartService,\n              private arrayViewService: ArrayViewService,\n              private ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n    // Manage change detection explicitly\n    this.ref.detach();\n    // Get the series\n    this.series = this.getChartSeries();\n    // Build the chart options\n    this.chartOptions = this.getChartOptions();\n    // Trigger change detection\n    this.ref.detectChanges();\n  }\n\n  ngOnChanges() {\n    // Ensure that a chart already exists\n    if (this.Highcharts && this.chartOptions) {\n      // Fetch the series using the latest flowsheet information\n      this.series = this.getChartSeries();\n      // If the series is different\n      if (this.series !== this.chartOptions.series) {\n        this.updateChart();\n        this.chartOptions = {...this.chartOptions};\n        if (this.ref) {\n          this.ref.detectChanges();\n        }\n      }\n    }\n  }\n\n  /**\n   * Updates the chart\n   */\n  updateChart() {\n    this.chartOptions.series = this.series;\n    this.updateXAxis();\n    this.updateYAxis();\n  }\n\n  /**\n   * Updates the pieces of the Y axis that need updating\n   */\n  updateYAxis() {\n    const minYAxisTick = this.chartService.getMinYAxisTick(this.minRiScore);\n    // If the min Y axis value would change, update it\n    if (this.chartOptions.yAxis[0].min !== minYAxisTick) {\n      this.chartOptions.yAxis[0].min = minYAxisTick;\n      this.chartOptions.yAxis[0].plotLines = this.chartService.createZeroAxisLine(this.minRiScore);\n    }\n  }\n\n  /**\n   * Updates the pieces of the X axis that need updating\n   */\n  updateXAxis() {\n    this.chartOptions.xAxis = this.getXaxis();\n  }\n\n  /**\n   * Returns the chart options\n   */\n  getChartOptions() {\n    return {\n      chart: {\n        type: 'line',\n        spacing: [2, 0, 0, 0],\n        marginLeft: 18,\n        marginRight: 2,\n        plotBackgroundColor: 'white',\n        reflow: false,\n        animation: false,\n        alignTicks: false\n      },\n      tooltip: {\n        enabled: false,\n        animation: false\n      },\n      plotOptions: {\n        series: {\n          color: '#848484',\n          turboThreshold: 0,\n          animation: false,\n          enableMouseTracking: false,\n          stickyTracking: false,\n          shadow: false,\n          dataLabels: {\n            style: {\n              textShadow: false\n            }\n          }\n        },\n        line: {\n          animation: false,\n          enableMouseTracking: false,\n          stickyTracking: false,\n          shadow: false,\n          dataLabels: {\n            style: {\n              textShadow: false\n            }\n          }\n        }\n      },\n      credits: {\n        enabled: false\n      },\n      legend: {\n        enabled: false\n      },\n      title: {\n        text: ''\n      },\n      xAxis: this.getXaxis(),\n      yAxis: this.getYaxis(),\n      series: this.series\n    };\n  }\n\n  getXaxis() {\n    const xAxis = [];\n    xAxis.push({\n      type: 'datetime',\n      startOnTick: false,\n      endOnTick: false,\n      tickInterval: this.graph.isDischarged ? null : this.DAY_IN_MILLISECONDS,\n      gridLineWidth: 1,\n      plotLines: this.chartService.updateAlertPlotLine(this.graph),\n      title: {\n        text: ' '\n      },\n      labels: {\n        distance: 20,\n        style: {\n          color: 'black',\n          'font-size': '.6em'\n        },\n        formatter: function () {\n          return moment(this.value).utcOffset(0).format('MM/DD');\n        },\n        step: 1\n      },\n      min: this.getMinXAxisValue(),\n      max: this.getMaxXAxisValue(),\n    });\n    return xAxis;\n  }\n\n  getMaxXAxisValue() {\n    return (this.graph.discharged) ? null : this.dateService.translateDate(this.arrayViewService.getCurrentTimestamp(), this.graph.timeZone);\n  }\n\n  getMinXAxisValue() {\n    return (this.graph.discharged) ? null : this.dateService.translateDate(\n      this.arrayViewService.getCurrentTimestamp(), this.graph.timeZone) - this.X_AXIS_DAYS * this.DAY_IN_MILLISECONDS;\n  }\n\n  getYaxis() {\n    const yAxis = [];\n    yAxis.push({\n      title: {\n        text: ' '\n      },\n      labels: {\n        style: {\n          color: 'black',\n          'font-size': '.6em'\n        },\n        padding: 1,\n        align: 'center'\n      },\n      offset: -12,\n      //     gridLineColor : colorHealthScoreGridLine,\n      gridLineWidth: 1,\n      min: this.chartService.getMinYAxisTick(this.minRiScore),\n      max: 100,\n      plotLines: this.chartService.createZeroAxisLine(this.minRiScore),\n      tickPositioner: function (min, max) {\n\n        let tick = min;\n        const ticks = [];\n\n        while (tick <= max) {\n          ticks.push(tick);\n          tick += 20;\n        }\n\n        return ticks;\n\n      }\n    });\n    return yAxis;\n  }\n\n  getChartSeries() {\n    const series = [];\n    series.push({\n      name: '',\n      data: this.getDataPoints(this.flowsheets),\n      showInLegend: false,\n      turboThreshold: 0,\n      color: {\n        linearGradient: {x1: 0, x2: 1, y1: 0, y2: 0},\n        stops: this.getArrayOfLocationChanges(this.flowsheets)\n      },\n      marker: {\n        enabled: (this.flowsheets && this.flowsheets.length === 1) ? true : false,\n        color: (this.flowsheets && this.flowsheets.length === 1) ? this.chartService.getMarkerColor(this.flowsheets[0].unitType) : null,\n        radius: 1.5\n      }\n    });\n    return series;\n  }\n\n  getArrayOfLocationChanges(fscList) {\n    const range = this.maxRecordedDt - this.minRecordedDt;\n    const colors = [[0, 'black']];\n    let color = 'black';\n    let unitType = null;\n    let xval = 0;\n\n    if (fscList && range > 0) {\n      fscList.forEach((fsc) => {\n        // If the unit type changed\n        if (fsc.unitType !== unitType) {\n          // Get the percentage across the X axis by recorded date\n          xval = (fsc.key.recordedDt - this.minRecordedDt) / range;\n          // add an entry just prior to this point to smooth the gradient\n          colors.push([xval - .0001, color]);\n          // The the appropriate color for this unitType\n          color = this.chartService.getMarkerColor(fsc.unitType);\n          // Push the change in color\n          colors.push([xval, color]);\n          // Remember the current unit type\n          unitType = fsc.unitType;\n        }\n      });\n    }\n\n    return colors;\n  }\n\n  getDataPoints(data) {\n    const dataPoints = [];\n    // Reset the variables\n    this.minRiScore = 100;\n    this.minRecordedDt = 999999999999999999999;\n    this.maxRecordedDt = 0;\n\n    // If we have data\n    if (data) {\n      data.forEach((fsc) => {\n        dataPoints.push([this.dateService.translateDate(fsc.key.recordedDt, this.graph.timeZone), fsc.riScore + (Math.random() / 1000)]);\n        // Keep track of the extreme values - they are used elsewhere\n        this.minRecordedDt = (this.minRecordedDt > fsc.key.recordedDt) ? fsc.key.recordedDt : this.minRecordedDt;\n        this.maxRecordedDt = (this.maxRecordedDt < fsc.key.recordedDt) ? fsc.key.recordedDt : this.maxRecordedDt;\n        this.minRiScore = (this.minRiScore > fsc.riScore) ? fsc.riScore : this.minRiScore;\n      });\n    }\n    return dataPoints;\n  }\n\n  ngOnDestroy(): void {\n    if (this.ref) {\n      this.ref.detach();\n      this.ref = null;\n    }\n  }\n}\n","import {ChangeDetectorRef, Component, Input, OnChanges, OnInit} from '@angular/core';\nimport {PeraGraphService} from '../service/pera-graph.service';\nimport {WarningService} from 'ng-common-library';\nimport {ArrayViewService} from '../../../service/array-view.service';\n\n@Component({\n  selector: 'phlib-pera-graph-tile',\n  templateUrl: './pera-graph-tile.component.html',\n  styleUrls: ['./pera-graph-tile.component.css']\n})\nexport class PeraGraphTileComponent implements OnInit, OnChanges {\n\n  @Input()\n  graph;\n\n  @Input()\n  latestRi;\n\n  @Input()\n  priorWarning: string;\n\n  priorWarningIndicator;\n\n  public style: object;\n\n  constructor(public peraGraphService: PeraGraphService,\n              public warningService: WarningService,\n              public arrayViewService: ArrayViewService,\n              public ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n      // Subscribe to the chart title subject and invoke change detection when new value is pushed.\n      this.arrayViewService.chartTitleSubject$.subscribe(() => {\n          if (this.ref) {\n              this.ref.detectChanges();\n          }\n      });\n  }\n\n  ngOnChanges() {\n    this.updateBackgroundColor();\n  }\n\n  updateBackgroundColor() {\n    const warning = (this.graph) ? this.graph.activeWarning : null;\n    this.style = {\n      backgroundColor: this.peraGraphService.getBackgroundColorByWarningAndRi(warning, this.latestRi, this.graph.discharged)\n    };\n\n    this.priorWarningIndicator = this.warningService.getWarningClass(this.priorWarning);\n\n  }\n}\n","import {ChangeDetectionStrategy, Component, Input, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'app-group-header',\n  templateUrl: './group-header.component.html',\n  styleUrls: ['./group-header.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GroupHeaderComponent implements OnInit {\n\n  @Input()\n  public numberOfPatients;\n\n  @Input()\n  public name;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import {\n    ChangeDetectionStrategy, ChangeDetectorRef,\n    Component,\n    Input,\n    OnChanges,\n    OnInit,\n    SimpleChanges\n} from '@angular/core';\nimport {PeraGraphService} from '../service/pera-graph.service';\nimport {WarningService} from 'ng-common-library';\nimport {ArrayViewService} from '../../../service/array-view.service';\n\n@Component({\n  selector: 'phlib-pera-graph-header',\n  templateUrl: './pera-graph-header.component.html',\n  styleUrls: ['./pera-graph-header.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PeraGraphHeaderComponent implements OnInit, OnChanges {\n\n  @Input()\n  graph;\n\n  @Input()\n  latestRi;\n\n  public style: object;\n\n  priorWarningIndicator;\n  priorWarningIndicatorId;\n\n  @Input()\n  priorWarning: string;\n\n  constructor(public peraGraphService: PeraGraphService,\n              public warningService: WarningService,\n              public arrayViewService: ArrayViewService,\n              public ref: ChangeDetectorRef) {\n  }\n\n  ngOnInit() {\n      // Subscribe to the chart title subject and invoke change detection when new value is pushed.\n      this.arrayViewService.chartTitleSubject$.subscribe(() => {\n          if (this.ref) {\n              this.ref.detectChanges();\n          }\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // If the latest RI or graph changed, update the header color\n    if (changes.latestRi || changes.graph) {\n      this.updateHeaderColor();\n    }\n    this.priorWarningIndicator = this.warningService.getWarningClass(this.priorWarning);\n    // This is so that QA can find the prior warning indicator and ensure that it has the correct color\n    this.priorWarningIndicatorId = 'priorWarningIndicator-' + this.graph.vnm;\n  }\n\n  updateHeaderColor() {\n    const warning = (this.graph) ? this.graph.activeWarning : null;\n    this.style = {\n      backgroundColor: this.peraGraphService.getBackgroundColorByWarningAndRi(warning, this.latestRi, this.graph.discharged),\n      width: '100%',\n    };\n  }\n\n}\n","import {Component, Input} from '@angular/core';\nimport {DateService} from 'ng-common-library';\nimport {PeraGraph} from 'ng-common-library/lib/model/PeraGraph';\n\n@Component({\n  selector: 'phlib-chart-tooltip',\n  templateUrl: './tooltip.component.html',\n  styleUrls: ['./tooltip.component.css']\n})\nexport class TooltipComponent {\n\n  @Input()\n  public graph: PeraGraph;\n\n  constructor(private dateService: DateService) {\n  }\n\n  public getAdmitDate(): string {\n    if (this.graph && this.graph.timeZone && this.graph.admitDate) {\n      return this.dateService.getDateFormat(this.graph.timeZone, this.graph.admitDate, 'MM/DD/YY HH:mm z');\n    }\n    return '';\n  }\n\n  getDischargeDate(): string {\n    if (this.graph && this.graph.timeZone && this.graph.discharged && this.graph.dischargeDate) {\n      return this.dateService.getDateFormat(this.graph.timeZone, this.graph.dischargeDate, 'MM/DD/YY HH:mm z');\n    }\n    return '';\n  }\n\n  isDischarged(): boolean {\n    return (this.graph && this.graph.isDischarged);\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {ArrayViewComponent} from './array-view.component';\nimport {GroupComponent} from './group/group.component';\nimport {PeraGraphComponent} from './group/pera-graph/pera-graph.component';\nimport {ChartComponent} from './group/pera-graph/chart/chart.component';\nimport {HighchartsChartModule} from 'highcharts-angular';\nimport {VirtualScrollModule} from 'od-virtualscroll';\nimport {ResizableModule} from 'angular-resizable-element';\nimport {PeraGraphTileComponent} from './group/pera-graph/pera-graph-tile/pera-graph-tile.component';\nimport {GroupHeaderComponent} from './group/group-header/group-header.component';\nimport {PeraGraphHeaderComponent} from './group/pera-graph/pera-graph-header/pera-graph-header.component';\nimport {TooltipComponent} from './group/pera-graph/tooltip/tooltip.component';\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\nimport {FilterQueryConfigService, FilterQueryRestService, FilterService} from 'ng-filters-library';\n\n\n@NgModule({\n  imports: [CommonModule,\n    HighchartsChartModule,\n    VirtualScrollModule,\n    ResizableModule,\n    NgbModule\n  ],\n  declarations: [\n    ArrayViewComponent,\n    GroupComponent,\n    GroupHeaderComponent,\n    PeraGraphComponent,\n    ChartComponent,\n    PeraGraphTileComponent,\n    TooltipComponent,\n    PeraGraphHeaderComponent],\n  exports: [ArrayViewComponent]\n})\nexport class ArrayViewModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: ArrayViewModule,\n      providers: [FilterService, FilterQueryRestService, FilterQueryConfigService]\n    };\n  }\n}\n"],"names":["filter","moment"],"mappings":"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"}
