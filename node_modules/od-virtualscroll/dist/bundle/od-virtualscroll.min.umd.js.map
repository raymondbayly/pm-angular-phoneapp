{"version":3,"file":"od-virtualscroll.min.umd.js","sources":["../es5/service.js","../es5/virtualRow.component.js","../es5/cmd.js","../es5/enumerate.js","../es5/measurement.js","../es5/scrollItem.js","../es5/set.js","../es5/userCmd.js","../es5/virtualScroll.component.js","../es5/virtualScroll.module.js"],"sourcesContent":["/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject, Subject } from 'rxjs';\nvar ScrollObservableService = /** @class */ (function () {\n    function ScrollObservableService() {\n        var _this = this;\n        this._scrollWin = new ReplaySubject(1);\n        this.scrollWin$ = this._scrollWin.asObservable();\n        this.emitScrollWin = function (e) { return _this._scrollWin.next(e); };\n        this._createRow = new Subject();\n        this.createRow$ = this._createRow.asObservable();\n        this.emitCreateRow = function (e) { return _this._createRow.next(e); };\n        this._removeRow = new Subject();\n        this.removeRow$ = this._removeRow.asObservable();\n        this.emitRemoveRow = function (e) { return _this._removeRow.next(e); };\n        this._shiftRow = new Subject();\n        this.shiftRow$ = this._shiftRow.asObservable();\n        this.emitShiftRow = function (e) { return _this._shiftRow.next(e); };\n        this._createItem = new Subject();\n        this.createItem$ = this._createItem.asObservable();\n        this.emitCreateItem = function (e) { return _this._createItem.next(e); };\n        this._updateItem = new Subject();\n        this.updateItem$ = this._updateItem.asObservable();\n        this.emitUpdateItem = function (e) { return _this._updateItem.next(e); };\n        this._removeItem = new Subject();\n        this.removeItem$ = this._removeItem.asObservable();\n        this.emitRemoveItem = function (e) { return _this._removeItem.next(e); };\n    }\n    ScrollObservableService.decorators = [\n        { type: Injectable },\n    ];\n    return ScrollObservableService;\n}());\nexport { ScrollObservableService };\nfunction ScrollObservableService_tsickle_Closure_declarations() {\n    /** @type {?} */\n    ScrollObservableService.prototype._scrollWin;\n    /** @type {?} */\n    ScrollObservableService.prototype.scrollWin$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitScrollWin;\n    /** @type {?} */\n    ScrollObservableService.prototype._createRow;\n    /** @type {?} */\n    ScrollObservableService.prototype.createRow$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitCreateRow;\n    /** @type {?} */\n    ScrollObservableService.prototype._removeRow;\n    /** @type {?} */\n    ScrollObservableService.prototype.removeRow$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitRemoveRow;\n    /** @type {?} */\n    ScrollObservableService.prototype._shiftRow;\n    /** @type {?} */\n    ScrollObservableService.prototype.shiftRow$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitShiftRow;\n    /** @type {?} */\n    ScrollObservableService.prototype._createItem;\n    /** @type {?} */\n    ScrollObservableService.prototype.createItem$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitCreateItem;\n    /** @type {?} */\n    ScrollObservableService.prototype._updateItem;\n    /** @type {?} */\n    ScrollObservableService.prototype.updateItem$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitUpdateItem;\n    /** @type {?} */\n    ScrollObservableService.prototype._removeItem;\n    /** @type {?} */\n    ScrollObservableService.prototype.removeItem$;\n    /** @type {?} */\n    ScrollObservableService.prototype.emitRemoveItem;\n}\n//# sourceMappingURL=service.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, HostBinding, ViewChild, ViewContainerRef } from '@angular/core';\nvar VirtualRowComponent = /** @class */ (function () {\n    function VirtualRowComponent(_cdr) {\n        this._cdr = _cdr;\n        this._translateY = 0;\n    }\n    Object.defineProperty(VirtualRowComponent.prototype, \"getTransform\", {\n        get: /**\n         * @return {?}\n         */\n        function () {\n            return \"translateY(\" + this._translateY + \"px)\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @param {?} template\n     * @param {?} context\n     * @param {?=} index\n     * @return {?}\n     */\n    VirtualRowComponent.prototype.addItem = /**\n     * @param {?} template\n     * @param {?} context\n     * @param {?=} index\n     * @return {?}\n     */\n    function (template, context, index) {\n        this._cdr.markForCheck();\n        return this._viewContainer.createEmbeddedView(template, context, index);\n    };\n    /**\n     * @param {?} translateY\n     * @return {?}\n     */\n    VirtualRowComponent.prototype.setTransform = /**\n     * @param {?} translateY\n     * @return {?}\n     */\n    function (translateY) {\n        this._translateY = translateY;\n    };\n    /**\n     * @param {?} column\n     * @param {?} context\n     * @return {?}\n     */\n    VirtualRowComponent.prototype.updateItem = /**\n     * @param {?} column\n     * @param {?} context\n     * @return {?}\n     */\n    function (column, context) {\n        this._cdr.markForCheck();\n        var /** @type {?} */ viewRef = /** @type {?} */ (this._viewContainer.get(column));\n        viewRef.context.$implicit = context;\n        return viewRef;\n    };\n    /**\n     * @param {?} column\n     * @return {?}\n     */\n    VirtualRowComponent.prototype.removeItem = /**\n     * @param {?} column\n     * @return {?}\n     */\n    function (column) {\n        this._cdr.markForCheck();\n        this._viewContainer.remove(column);\n    };\n    /**\n     * @param {?} row\n     * @return {?}\n     */\n    VirtualRowComponent.prototype.updateRow = /**\n     * @param {?} row\n     * @return {?}\n     */\n    function (row) {\n        for (var /** @type {?} */ c = 0; c < this._viewContainer.length; c++) {\n            var /** @type {?} */ viewRef = /** @type {?} */ (this._viewContainer.get(c));\n            viewRef.context.row = row;\n        }\n        this._cdr.markForCheck();\n    };\n    VirtualRowComponent.decorators = [\n        { type: Component, args: [{\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    selector: 'od-virtualrow',\n                    styles: [\":host { display: block; position: absolute }\"],\n                    template: \"<div #viewRef></div>\"\n                },] },\n    ];\n    /** @nocollapse */\n    VirtualRowComponent.ctorParameters = function () { return [\n        { type: ChangeDetectorRef }\n    ]; };\n    VirtualRowComponent.propDecorators = {\n        _viewContainer: [{ type: ViewChild, args: ['viewRef', { read: ViewContainerRef },] }],\n        getTransform: [{ type: HostBinding, args: ['style.transform',] }]\n    };\n    return VirtualRowComponent;\n}());\nexport { VirtualRowComponent };\nfunction VirtualRowComponent_tsickle_Closure_declarations() {\n    /** @type {?} */\n    VirtualRowComponent.prototype._viewContainer;\n    /** @type {?} */\n    VirtualRowComponent.prototype._translateY;\n    /** @type {?} */\n    VirtualRowComponent.prototype._cdr;\n}\n//# sourceMappingURL=virtualRow.component.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @enum {number} */\nvar CmdOption = {\n    Noop: 0,\n    CreateRow: 1,\n    ShiftRow: 2,\n    RemoveRow: 3,\n    CreateItem: 4,\n    UpdateItem: 5,\n    RemoveItem: 6,\n};\nexport { CmdOption };\nCmdOption[CmdOption.Noop] = \"Noop\";\nCmdOption[CmdOption.CreateRow] = \"CreateRow\";\nCmdOption[CmdOption.ShiftRow] = \"ShiftRow\";\nCmdOption[CmdOption.RemoveRow] = \"RemoveRow\";\nCmdOption[CmdOption.CreateItem] = \"CreateItem\";\nCmdOption[CmdOption.UpdateItem] = \"UpdateItem\";\nCmdOption[CmdOption.RemoveItem] = \"RemoveItem\";\n/**\n * @record\n */\nexport function ICmd() { }\nfunction ICmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    ICmd.prototype.cmdType;\n}\n/**\n * @record\n */\nexport function IRowRenderCmd() { }\nfunction IRowRenderCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    IRowRenderCmd.prototype.virtualIndex;\n    /** @type {?} */\n    IRowRenderCmd.prototype.actualIndex;\n}\n/**\n * @record\n */\nexport function ItemRenderCmd() { }\nfunction ItemRenderCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    ItemRenderCmd.prototype.columnIndex;\n    /** @type {?} */\n    ItemRenderCmd.prototype.dataIndex;\n}\nvar NoopCmd = /** @class */ (function () {\n    function NoopCmd() {\n        this.cmdType = CmdOption.Noop;\n    }\n    return NoopCmd;\n}());\nexport { NoopCmd };\nfunction NoopCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    NoopCmd.prototype.cmdType;\n}\nvar CreateRowCmd = /** @class */ (function () {\n    function CreateRowCmd(virtualIndex, actualIndex, initShift) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.initShift = initShift;\n        this.cmdType = CmdOption.CreateRow;\n    }\n    return CreateRowCmd;\n}());\nexport { CreateRowCmd };\nfunction CreateRowCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    CreateRowCmd.prototype.cmdType;\n    /** @type {?} */\n    CreateRowCmd.prototype.virtualIndex;\n    /** @type {?} */\n    CreateRowCmd.prototype.actualIndex;\n    /** @type {?} */\n    CreateRowCmd.prototype.initShift;\n}\nvar RemoveRowCmd = /** @class */ (function () {\n    function RemoveRowCmd(virtualIndex, actualIndex) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.cmdType = CmdOption.RemoveRow;\n    }\n    return RemoveRowCmd;\n}());\nexport { RemoveRowCmd };\nfunction RemoveRowCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    RemoveRowCmd.prototype.cmdType;\n    /** @type {?} */\n    RemoveRowCmd.prototype.virtualIndex;\n    /** @type {?} */\n    RemoveRowCmd.prototype.actualIndex;\n}\nvar ShiftRowCmd = /** @class */ (function () {\n    function ShiftRowCmd(virtualIndex, actualIndex, shift) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.shift = shift;\n        this.cmdType = CmdOption.ShiftRow;\n    }\n    return ShiftRowCmd;\n}());\nexport { ShiftRowCmd };\nfunction ShiftRowCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    ShiftRowCmd.prototype.cmdType;\n    /** @type {?} */\n    ShiftRowCmd.prototype.virtualIndex;\n    /** @type {?} */\n    ShiftRowCmd.prototype.actualIndex;\n    /** @type {?} */\n    ShiftRowCmd.prototype.shift;\n}\nvar CreateItemCmd = /** @class */ (function () {\n    function CreateItemCmd(virtualIndex, actualIndex, columnIndex, dataIndex) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.columnIndex = columnIndex;\n        this.dataIndex = dataIndex;\n        this.cmdType = CmdOption.CreateItem;\n    }\n    return CreateItemCmd;\n}());\nexport { CreateItemCmd };\nfunction CreateItemCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    CreateItemCmd.prototype.cmdType;\n    /** @type {?} */\n    CreateItemCmd.prototype.virtualIndex;\n    /** @type {?} */\n    CreateItemCmd.prototype.actualIndex;\n    /** @type {?} */\n    CreateItemCmd.prototype.columnIndex;\n    /** @type {?} */\n    CreateItemCmd.prototype.dataIndex;\n}\nvar UpdateItemCmd = /** @class */ (function () {\n    function UpdateItemCmd(virtualIndex, actualIndex, columnIndex, dataIndex) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.columnIndex = columnIndex;\n        this.dataIndex = dataIndex;\n        this.cmdType = CmdOption.UpdateItem;\n    }\n    return UpdateItemCmd;\n}());\nexport { UpdateItemCmd };\nfunction UpdateItemCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    UpdateItemCmd.prototype.cmdType;\n    /** @type {?} */\n    UpdateItemCmd.prototype.virtualIndex;\n    /** @type {?} */\n    UpdateItemCmd.prototype.actualIndex;\n    /** @type {?} */\n    UpdateItemCmd.prototype.columnIndex;\n    /** @type {?} */\n    UpdateItemCmd.prototype.dataIndex;\n}\nvar RemoveItemCmd = /** @class */ (function () {\n    function RemoveItemCmd(virtualIndex, actualIndex, columnIndex, dataIndex) {\n        this.virtualIndex = virtualIndex;\n        this.actualIndex = actualIndex;\n        this.columnIndex = columnIndex;\n        this.dataIndex = dataIndex;\n        this.cmdType = CmdOption.RemoveItem;\n    }\n    return RemoveItemCmd;\n}());\nexport { RemoveItemCmd };\nfunction RemoveItemCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    RemoveItemCmd.prototype.cmdType;\n    /** @type {?} */\n    RemoveItemCmd.prototype.virtualIndex;\n    /** @type {?} */\n    RemoveItemCmd.prototype.actualIndex;\n    /** @type {?} */\n    RemoveItemCmd.prototype.columnIndex;\n    /** @type {?} */\n    RemoveItemCmd.prototype.dataIndex;\n}\n//# sourceMappingURL=cmd.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @param {?} start\n * @param {?} end\n * @param {?} numActualRows\n * @param {?} iteratee\n * @return {?}\n */\nexport function forRowsIn(start, end, numActualRows, iteratee) {\n    for (var /** @type {?} */ r = start; r <= end; r++) {\n        iteratee(r, r % numActualRows);\n    }\n}\n/**\n * @param {?} start\n * @param {?} end\n * @param {?} row\n * @param {?} numColumns\n * @param {?} numTotalItems\n * @param {?} iteratee\n * @return {?}\n */\nexport function forColumnsIn(start, end, row, numColumns, numTotalItems, iteratee) {\n    var /** @type {?} */ getDataIndex = function (c) { return row * numColumns + c; };\n    for (var /** @type {?} */ c = start, /** @type {?} */ dataIndx = getDataIndex(c); c <= end && dataIndx < numTotalItems; c++, dataIndx = getDataIndex(c)) {\n        iteratee(c, dataIndx);\n    }\n}\n/**\n * @param {?} start\n * @param {?} end\n * @param {?} row\n * @param {?} numColumns\n * @param {?} prevRow\n * @param {?} numPrevColumns\n * @param {?} iteratee\n * @return {?}\n */\nexport function forColumnsInWithPrev(start, end, row, numColumns, prevRow, numPrevColumns, iteratee) {\n    for (var /** @type {?} */ c = start; c <= end; c++) {\n        iteratee(c, row * numColumns + c, prevRow * numPrevColumns + c);\n    }\n}\n//# sourceMappingURL=enumerate.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @param {?} rect\n * @param {?} options\n * @return {?}\n */\nexport function calcMeasure(rect, options) {\n    var /** @type {?} */ numPossibleRows = Math.ceil(rect.height / options.itemHeight);\n    var /** @type {?} */ numPossibleColumns = options.itemWidth !== undefined ? Math.floor(rect.width / options.itemWidth) : 0;\n    return {\n        containerHeight: rect.height,\n        containerWidth: rect.width,\n        itemHeight: options.itemHeight,\n        itemWidth: options.itemWidth,\n        numPossibleColumns: numPossibleColumns,\n        numPossibleItems: numPossibleRows * numPossibleColumns,\n        numPossibleRows: numPossibleRows,\n    };\n}\nvar /** @type {?} */ clamp = function (min, max, value) { return Math.min(max, Math.max(min, value)); };\nvar ɵ0 = clamp;\n/**\n * @param {?} scrollTop\n * @param {?} measure\n * @param {?} numItems\n * @param {?} dataTimestamp\n * @param {?} options\n * @return {?}\n */\nexport function calcScrollWindow(scrollTop, measure, numItems, dataTimestamp, options) {\n    var /** @type {?} */ numVirtualItems = numItems;\n    var /** @type {?} */ requestedColumns = options.numLimitColumns !== undefined ? options.numLimitColumns : measure.numPossibleColumns;\n    var /** @type {?} */ numActualColumns = Math.min(numVirtualItems, requestedColumns);\n    var /** @type {?} */ numVirtualRows = Math.ceil(numVirtualItems / Math.max(1, numActualColumns));\n    var /** @type {?} */ virtualHeight = numVirtualRows * measure.itemHeight;\n    var /** @type {?} */ numAdditionalRows = options.numAdditionalRows !== undefined ? options.numAdditionalRows : 1;\n    var /** @type {?} */ requestedRows = measure.numPossibleRows + numAdditionalRows;\n    var /** @type {?} */ numActualRows = numActualColumns > 0 ? Math.min(requestedRows, numVirtualRows) : 0;\n    var /** @type {?} */ actualHeight = numActualRows * measure.itemHeight;\n    var /** @type {?} */ visibleEndRow = numActualColumns > 0 && numActualRows > 0 ? clamp(0, numVirtualRows - 1, Math.floor((scrollTop + actualHeight) / measure.itemHeight) - 1) : -1;\n    return {\n        actualHeight: actualHeight,\n        containerHeight: measure.containerHeight,\n        containerWidth: measure.containerWidth,\n        dataTimestamp: dataTimestamp,\n        itemHeight: measure.itemHeight,\n        itemWidth: measure.itemWidth,\n        numActualColumns: numActualColumns,\n        numActualItems: Math.min(numActualRows * numActualColumns, numVirtualItems),\n        numActualRows: numActualRows,\n        numAdditionalRows: numAdditionalRows,\n        numVirtualItems: numVirtualItems,\n        numVirtualRows: numVirtualRows,\n        scrollPercentage: clamp(0, 100, scrollTop / (virtualHeight - measure.containerHeight)),\n        scrollTop: scrollTop,\n        virtualHeight: virtualHeight,\n        visibleEndRow: visibleEndRow,\n        visibleStartRow: visibleEndRow !== -1 ? Math.max(0, visibleEndRow - numActualRows + 1) : -1\n    };\n}\n/**\n * @param {?} scrollWin\n * @return {?}\n */\nexport function getMaxIndex(scrollWin) {\n    return scrollWin.visibleEndRow * scrollWin.numActualColumns + scrollWin.numActualColumns - 1;\n}\nexport { ɵ0 };\n//# sourceMappingURL=measurement.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nvar ScrollItem = /** @class */ (function () {\n    function ScrollItem($implicit, row, column) {\n        this.$implicit = $implicit;\n        this.row = row;\n        this.column = column;\n    }\n    return ScrollItem;\n}());\nexport { ScrollItem };\nfunction ScrollItem_tsickle_Closure_declarations() {\n    /** @type {?} */\n    ScrollItem.prototype.$implicit;\n    /** @type {?} */\n    ScrollItem.prototype.row;\n    /** @type {?} */\n    ScrollItem.prototype.column;\n}\n//# sourceMappingURL=scrollItem.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/**\n * @param {?} obj\n * @return {?}\n */\nexport function isEmpty(obj) {\n    return Object.keys(obj).length === 0;\n}\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\nexport function intersection(a, b) {\n    var /** @type {?} */ result = {};\n    for (var /** @type {?} */ key in a) {\n        if (b[key] !== undefined) {\n            result[key] = { left: a[key], right: b[key] };\n        }\n    }\n    return result;\n}\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\nexport function difference(a, b) {\n    var /** @type {?} */ result = {};\n    for (var /** @type {?} */ key in a) {\n        if (b[key] === undefined) {\n            result[key] = a[key];\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=set.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\n/** @enum {number} */\nvar UserCmdOption = {\n    SetScrollTop: 0,\n    FocusRow: 1,\n    FocusItem: 2,\n};\nexport { UserCmdOption };\nUserCmdOption[UserCmdOption.SetScrollTop] = \"SetScrollTop\";\nUserCmdOption[UserCmdOption.FocusRow] = \"FocusRow\";\nUserCmdOption[UserCmdOption.FocusItem] = \"FocusItem\";\n/**\n * @record\n */\nexport function IUserCmd() { }\nfunction IUserCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    IUserCmd.prototype.cmdType;\n}\nvar SetScrollTopCmd = /** @class */ (function () {\n    function SetScrollTopCmd(value) {\n        this.value = value;\n        this.cmdType = UserCmdOption.SetScrollTop;\n    }\n    return SetScrollTopCmd;\n}());\nexport { SetScrollTopCmd };\nfunction SetScrollTopCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    SetScrollTopCmd.prototype.cmdType;\n    /** @type {?} */\n    SetScrollTopCmd.prototype.value;\n}\nvar FocusRowCmd = /** @class */ (function () {\n    function FocusRowCmd(rowIndex) {\n        this.rowIndex = rowIndex;\n        this.cmdType = UserCmdOption.FocusRow;\n    }\n    return FocusRowCmd;\n}());\nexport { FocusRowCmd };\nfunction FocusRowCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    FocusRowCmd.prototype.cmdType;\n    /** @type {?} */\n    FocusRowCmd.prototype.rowIndex;\n}\nvar FocusItemCmd = /** @class */ (function () {\n    function FocusItemCmd(itemIndex) {\n        this.itemIndex = itemIndex;\n        this.cmdType = UserCmdOption.FocusItem;\n    }\n    return FocusItemCmd;\n}());\nexport { FocusItemCmd };\nfunction FocusItemCmd_tsickle_Closure_declarations() {\n    /** @type {?} */\n    FocusItemCmd.prototype.cmdType;\n    /** @type {?} */\n    FocusItemCmd.prototype.itemIndex;\n}\n//# sourceMappingURL=userCmd.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactoryResolver, ContentChild, ElementRef, Input, NgZone, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\nimport { animationFrameScheduler as animationScheduler, combineLatest, concat, empty, from, fromEvent, merge, Observable, of, Subject } from 'rxjs';\nimport { concatMap, debounceTime, distinctUntilChanged, filter, map, pairwise, publish, scan, startWith, withLatestFrom } from 'rxjs/operators';\nimport { CmdOption, CreateItemCmd, CreateRowCmd, NoopCmd, RemoveItemCmd, RemoveRowCmd, ShiftRowCmd, UpdateItemCmd } from './cmd';\nimport { forColumnsIn, forColumnsInWithPrev, forRowsIn } from './enumerate';\nimport { calcMeasure, calcScrollWindow, getMaxIndex } from './measurement';\nimport { ScrollItem } from './scrollItem';\nimport { ScrollObservableService } from './service';\nimport { difference, intersection, isEmpty } from './set';\nimport { SetScrollTopCmd, UserCmdOption } from './userCmd';\nimport { VirtualRowComponent } from './virtualRow.component';\nvar VirtualScrollComponent = /** @class */ (function () {\n    function VirtualScrollComponent(_elem, _cdr, _componentFactoryResolver, _obsService, _zone) {\n        this._elem = _elem;\n        this._cdr = _cdr;\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._obsService = _obsService;\n        this._zone = _zone;\n        this.vsData = empty();\n        this.vsOptions = empty();\n        this.vsResize = empty();\n        this.vsUserCmd = empty();\n        this.vsDebounceTime = 0;\n        this.vsEqualsFunc = function (prevIndex, curIndex) { return prevIndex === curIndex; };\n        this.height = 0;\n        this.width = '0px';\n        this._rowFactory = this._componentFactoryResolver.resolveComponentFactory(VirtualRowComponent);\n        this._subs = [];\n    }\n    /**\n     * @return {?}\n     */\n    VirtualScrollComponent.prototype.ngOnInit = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        var /** @type {?} */ getContainerRect = function () { return _this._elem.nativeElement.getBoundingClientRect(); };\n        var /** @type {?} */ getScrollTop = function () { return _this._elem.nativeElement.scrollTop; };\n        var /** @type {?} */ setScrollTop = function (scrollTop) { _this._elem.nativeElement.scrollTop = scrollTop; };\n        var /** @type {?} */ initData = [];\n        var /** @type {?} */ data$ = /** @type {?} */ (this.vsData.pipe(startWith(initData), publish()));\n        var /** @type {?} */ dataMeta$ = data$.pipe(map(function (data) { return [(new Date()).getTime(), data.length]; }));\n        var /** @type {?} */ defaultOptions = { itemWidth: 100, itemHeight: 100, numAdditionalRows: 1 };\n        var /** @type {?} */ options$ = /** @type {?} */ (this.vsOptions.pipe(startWith(defaultOptions), publish()));\n        var /** @type {?} */ rect$ = merge(fromEvent(window, 'resize'), this.vsResize).pipe(debounceTime(this.vsDebounceTime, animationScheduler), map(function () { return getContainerRect(); }), startWith(getContainerRect()), map(function (_a) {\n            var width = _a.width, height = _a.height;\n            return ({ width: width, height: height });\n        }));\n        var /** @type {?} */ scroll$ = new Subject();\n        this._zone.runOutsideAngular(function () {\n            _this._subs.push(fromEvent(_this._elem.nativeElement, 'scroll')\n                .pipe(debounceTime(_this.vsDebounceTime, animationScheduler))\n                .subscribe(function () {\n                _this._zone.run(function () { return scroll$.next(); });\n            }));\n        });\n        var /** @type {?} */ scrollTop$ = scroll$.pipe(map(function () { return getScrollTop(); }), startWith(0));\n        var /** @type {?} */ measure$ = /** @type {?} */ (combineLatest(rect$, options$).pipe(map(function (_a) {\n            var rect = _a[0], options = _a[1];\n            return calcMeasure(rect, options);\n        }), publish()));\n        var /** @type {?} */ scrollWin$ = /** @type {?} */ (combineLatest(scrollTop$, measure$, dataMeta$, options$).pipe(map(function (_a) {\n            var scrollTop = _a[0], measurement = _a[1], _b = _a[2], dataTimestamp = _b[0], dataLength = _b[1], options = _a[3];\n            return calcScrollWindow(scrollTop, measurement, dataLength, dataTimestamp, options);\n        }), distinctUntilChanged(function (prevWin, curWin) {\n            return prevWin.visibleStartRow === curWin.visibleStartRow &&\n                prevWin.visibleEndRow === curWin.visibleEndRow &&\n                prevWin.numActualColumns === curWin.numActualColumns &&\n                prevWin.numVirtualItems === curWin.numVirtualItems &&\n                prevWin.dataTimestamp === curWin.dataTimestamp;\n        }), publish()));\n        var /** @type {?} */ dScrollWin$ = scrollWin$.pipe(pairwise());\n        var /** @type {?} */ renderCmd$ = /** @type {?} */ (dScrollWin$.pipe(concatMap(function (_a) {\n            var prevWin = _a[0], curWin = _a[1];\n            var /** @type {?} */ rowsDiffCmd$ = of(new NoopCmd());\n            var /** @type {?} */ rowsUpdateCmd$ = of(new NoopCmd());\n            var /** @type {?} */ prevIndexMap = {};\n            var /** @type {?} */ curIndexMap = {};\n            // abs: prevent iterating when prevWin has -1 -> -1\n            forRowsIn(Math.abs(prevWin.visibleStartRow), prevWin.visibleEndRow, prevWin.numActualRows, function (row, index) {\n                prevIndexMap[index] = row;\n            });\n            // abs: prevent iterating when curWin has -1 -> -1\n            forRowsIn(Math.abs(curWin.visibleStartRow), curWin.visibleEndRow, curWin.numActualRows, function (row, index) {\n                curIndexMap[index] = row;\n            });\n            var /** @type {?} */ removeRowsMap = difference(prevIndexMap, curIndexMap);\n            var /** @type {?} */ createRowsMap = difference(curIndexMap, prevIndexMap);\n            if (!isEmpty(removeRowsMap)) {\n                var /** @type {?} */ removeRowCmds = [];\n                var /** @type {?} */ removeItemCmds_1 = [];\n                var _loop_1 = function (key) {\n                    var /** @type {?} */ rowIndex = parseInt(key, 10);\n                    var /** @type {?} */ row = removeRowsMap[key];\n                    removeRowCmds.push(new RemoveRowCmd(row, rowIndex));\n                    forColumnsIn(0, prevWin.numActualColumns - 1, row, prevWin.numActualColumns, prevWin.numVirtualItems, function (c, dataIndex) {\n                        removeItemCmds_1.push(new RemoveItemCmd(row, rowIndex, c, dataIndex));\n                    });\n                };\n                for (var /** @type {?} */ key in removeRowsMap) {\n                    _loop_1(key);\n                }\n                rowsDiffCmd$ = concat(from(removeItemCmds_1.reverse()), from(removeRowCmds));\n            }\n            else if (!isEmpty(createRowsMap)) {\n                var /** @type {?} */ createRowCmds = [];\n                var /** @type {?} */ createItemCmds_1 = [];\n                var _loop_2 = function (key) {\n                    var /** @type {?} */ rowIndex = parseInt(key, 10);\n                    var /** @type {?} */ row = createRowsMap[key];\n                    createRowCmds.push(new CreateRowCmd(row, rowIndex, row * curWin.itemHeight));\n                    forColumnsIn(0, curWin.numActualColumns - 1, row, curWin.numActualColumns, curWin.numVirtualItems, function (c, dataIndex) {\n                        createItemCmds_1.push(new CreateItemCmd(row, rowIndex, c, dataIndex));\n                    });\n                };\n                for (var /** @type {?} */ key in createRowsMap) {\n                    _loop_2(key);\n                }\n                rowsDiffCmd$ = concat(from(createRowCmds), from(createItemCmds_1));\n            }\n            var /** @type {?} */ existingRows = intersection(prevIndexMap, curIndexMap);\n            if (!isEmpty(existingRows)) {\n                var /** @type {?} */ shiftRowCmds = [];\n                var /** @type {?} */ createItemCmds_2 = [];\n                var /** @type {?} */ removeItemCmds_2 = [];\n                var /** @type {?} */ updateItemCmds_1 = [];\n                var /** @type {?} */ columnDiffCreateItemCmds_1 = [];\n                var /** @type {?} */ columnDiffRemoveItemCmds_1 = [];\n                var /** @type {?} */ columnsDiffStart = Math.min(prevWin.numActualColumns, curWin.numActualColumns);\n                var /** @type {?} */ numColumns = curWin.numActualColumns - prevWin.numActualColumns;\n                var _loop_3 = function (key) {\n                    var /** @type {?} */ rowIndex = parseInt(key, 10);\n                    var /** @type {?} */ prevRow = existingRows[key].left;\n                    var /** @type {?} */ row = existingRows[key].right;\n                    if (row !== prevRow) {\n                        shiftRowCmds.push(new ShiftRowCmd(row, rowIndex, row * curWin.itemHeight));\n                    }\n                    if (row !== prevRow || numColumns !== 0 || prevWin.numVirtualItems <= getMaxIndex(prevWin) || curWin.numVirtualItems <= getMaxIndex(curWin) || prevWin.dataTimestamp !== curWin.dataTimestamp) {\n                        forColumnsInWithPrev(0, columnsDiffStart - 1, row, curWin.numActualColumns, prevRow, prevWin.numActualColumns, function (c, dataIndex, prevDataIndex) {\n                            if (dataIndex >= curWin.numVirtualItems && prevDataIndex < prevWin.numVirtualItems) {\n                                removeItemCmds_2.push(new RemoveItemCmd(row, rowIndex, c, prevDataIndex));\n                            }\n                            else if (dataIndex < curWin.numVirtualItems && prevDataIndex >= prevWin.numVirtualItems) {\n                                createItemCmds_2.push(new CreateItemCmd(row, rowIndex, c, dataIndex));\n                            }\n                            else if (dataIndex < curWin.numVirtualItems && prevDataIndex < prevWin.numVirtualItems && !_this.vsEqualsFunc(prevDataIndex, dataIndex)) {\n                                updateItemCmds_1.push(new UpdateItemCmd(row, rowIndex, c, dataIndex));\n                            }\n                        });\n                    }\n                    if (numColumns > 0) {\n                        forColumnsIn(columnsDiffStart, curWin.numActualColumns - 1, row, curWin.numActualColumns, curWin.numVirtualItems, function (c, dataIndex) {\n                            columnDiffCreateItemCmds_1.push(new CreateItemCmd(row, rowIndex, c, dataIndex));\n                        });\n                    }\n                    else if (numColumns < 0) {\n                        forColumnsIn(columnsDiffStart, prevWin.numActualColumns - 1, prevRow, prevWin.numActualColumns, prevWin.numVirtualItems, function (c, dataIndex) {\n                            columnDiffRemoveItemCmds_1.push(new RemoveItemCmd(prevRow, rowIndex, c, dataIndex));\n                        });\n                    }\n                };\n                for (var /** @type {?} */ key in existingRows) {\n                    _loop_3(key);\n                }\n                rowsUpdateCmd$ = concat(merge(from(removeItemCmds_2.reverse()), from(createItemCmds_2), from(updateItemCmds_1), from(shiftRowCmds)), merge(from(columnDiffRemoveItemCmds_1.reverse()), from(columnDiffCreateItemCmds_1)));\n            }\n            return merge(rowsDiffCmd$, rowsUpdateCmd$);\n        }), publish()));\n        var /** @type {?} */ updateScrollWinFunc$ = scrollWin$.pipe(map(function (scrollWindow) { return function (state) {\n            state.scrollWindow = scrollWindow;\n            _this._obsService.emitScrollWin([scrollWindow]);\n            state.needsCheck = true;\n            return state;\n        }; }));\n        var /** @type {?} */ createRowFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.CreateRow; }), map(function (cmd) { return function (state) {\n            var /** @type {?} */ newRow = _this._viewContainer.createComponent(_this._rowFactory);\n            newRow.instance.setTransform(cmd.initShift);\n            state.rows[cmd.actualIndex] = newRow;\n            _this._obsService.emitCreateRow([cmd, newRow]);\n            state.needsCheck = false;\n            return state;\n        }; }));\n        var /** @type {?} */ removeRowFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.RemoveRow; }), map(function (cmd) { return function (state) {\n            var /** @type {?} */ rowComp = state.rows[cmd.actualIndex];\n            rowComp.destroy();\n            delete state.rows[cmd.actualIndex];\n            _this._obsService.emitRemoveRow([cmd, rowComp]);\n            state.needsCheck = false;\n            return state;\n        }; }));\n        var /** @type {?} */ shiftRowFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.ShiftRow; }), map(function (cmd) { return function (state) {\n            var /** @type {?} */ shift = /** @type {?} */ (cmd);\n            var /** @type {?} */ row = state.rows[shift.actualIndex];\n            row.instance.updateRow(shift.virtualIndex);\n            row.instance.setTransform(shift.shift);\n            _this._obsService.emitShiftRow([shift, row]);\n            state.needsCheck = false;\n            return state;\n        }; }));\n        var /** @type {?} */ createItemFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.CreateItem; }), withLatestFrom(data$), map(function (_a) {\n            var cmd = _a[0], data = _a[1];\n            return function (state) {\n                var /** @type {?} */ createItem = /** @type {?} */ (cmd);\n                var /** @type {?} */ item = new ScrollItem(data[createItem.dataIndex], createItem.virtualIndex, createItem.columnIndex);\n                var /** @type {?} */ viewRef = state.rows[createItem.actualIndex].instance.addItem(_this._templateRef, item);\n                _this._obsService.emitCreateItem([createItem, item, viewRef]);\n                state.needsCheck = false;\n                return state;\n            };\n        }));\n        var /** @type {?} */ updateItemFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.UpdateItem; }), withLatestFrom(data$), map(function (_a) {\n            var cmd = _a[0], data = _a[1];\n            return function (state) {\n                var /** @type {?} */ update = /** @type {?} */ (cmd);\n                var /** @type {?} */ item = data[update.dataIndex];\n                var /** @type {?} */ viewRef = state.rows[update.actualIndex].instance.updateItem(update.columnIndex, item);\n                _this._obsService.emitUpdateItem([update, item, viewRef]);\n                state.needsCheck = false;\n                return state;\n            };\n        }));\n        var /** @type {?} */ removeItemFunc$ = renderCmd$.pipe(filter(function (cmd) { return cmd.cmdType === CmdOption.RemoveItem; }), map(function (cmd) { return function (state) {\n            var /** @type {?} */ comp = state.rows[cmd.actualIndex];\n            comp.instance.removeItem(cmd.columnIndex);\n            _this._obsService.emitRemoveItem([cmd]);\n            state.needsCheck = false;\n            return state;\n        }; }));\n        var /** @type {?} */ userCmd$ = /** @type {?} */ (this.vsUserCmd.pipe(publish()));\n        var /** @type {?} */ userSetScrollTop$ = userCmd$.pipe(filter(function (cmd) { return cmd.cmdType === UserCmdOption.SetScrollTop; }));\n        var /** @type {?} */ focusRowSetScrollTop$ = userCmd$.pipe(filter(function (cmd) { return cmd.cmdType === UserCmdOption.FocusRow; }), withLatestFrom(scrollWin$), map(function (_a) {\n            var cmd = _a[0], scrollWin = _a[1];\n            var /** @type {?} */ focusRow = /** @type {?} */ (cmd);\n            return new SetScrollTopCmd(focusRow.rowIndex * scrollWin.itemHeight);\n        }));\n        var /** @type {?} */ focusItemSetScrollTop$ = userCmd$.pipe(filter(function (cmd) { return cmd.cmdType === UserCmdOption.FocusItem; }), withLatestFrom(scrollWin$), map(function (_a) {\n            var cmd = _a[0], scrollWin = _a[1];\n            var /** @type {?} */ focusItem = /** @type {?} */ (cmd);\n            return new SetScrollTopCmd(Math.floor(focusItem.itemIndex / scrollWin.numActualColumns) * scrollWin.itemHeight);\n        }));\n        var /** @type {?} */ setScrollTopFunc$ = merge(userSetScrollTop$, focusRowSetScrollTop$, focusItemSetScrollTop$)\n            .pipe(map(function (cmd) { return function (state) {\n            setScrollTop(cmd.value);\n            state.needsCheck = false;\n            return state;\n        }; }));\n        var /** @type {?} */ scanFunc = function (state, changeFn) { return changeFn(state); };\n        // Update store\n        var /** @type {?} */ main$ = merge(createRowFunc$, removeRowFunc$, shiftRowFunc$, createItemFunc$, removeItemFunc$, updateItemFunc$, updateScrollWinFunc$, setScrollTopFunc$)\n            .pipe(scan(scanFunc, { measurement: null, scrollWindow: null, rows: {}, needsCheck: false }));\n        this._subs.push(main$\n            .pipe(filter(function (state) { return state.needsCheck && state.scrollWindow !== null; }))\n            .subscribe(function (state) {\n            _this.height = state.scrollWindow.virtualHeight;\n            if (state.scrollWindow.itemWidth === undefined) {\n                _this.width = '100%';\n            }\n            else {\n                _this.width = state.scrollWindow.itemWidth * state.scrollWindow.numActualColumns + \"px\";\n            }\n            _this._cdr.markForCheck();\n        }));\n        // Order is important\n        this._subs.push(userCmd$.connect());\n        this._subs.push(renderCmd$.connect());\n        this._subs.push(scrollWin$.connect());\n        this._subs.push(measure$.connect());\n        this._subs.push(options$.connect());\n        this._subs.push(data$.connect());\n    };\n    /**\n     * @return {?}\n     */\n    VirtualScrollComponent.prototype.ngOnDestroy = /**\n     * @return {?}\n     */\n    function () {\n        this._subs.forEach(function (sub) { return sub.unsubscribe(); });\n    };\n    VirtualScrollComponent.decorators = [\n        { type: Component, args: [{\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    selector: 'od-virtualscroll',\n                    styles: [\"\\n    :host {\\n      display: block;\\n      height: 100%;\\n      overflow-y: scroll;\\n    }\\n\\n    .od-scroll-container {\\n      position: relative;\\n      width: 100%;\\n    }\\n  \"],\n                    template: \"\\n    <div class=\\\"od-scroll-container\\\" [style.width]=\\\"width\\\" [style.height.px]=\\\"height\\\">\\n      <div #viewRef><div>\\n    </div>\",\n                },] },\n    ];\n    /** @nocollapse */\n    VirtualScrollComponent.ctorParameters = function () { return [\n        { type: ElementRef },\n        { type: ChangeDetectorRef },\n        { type: ComponentFactoryResolver },\n        { type: ScrollObservableService },\n        { type: NgZone }\n    ]; };\n    VirtualScrollComponent.propDecorators = {\n        _templateRef: [{ type: ContentChild, args: [TemplateRef,] }],\n        _viewContainer: [{ type: ViewChild, args: ['viewRef', { read: ViewContainerRef },] }],\n        vsData: [{ type: Input }],\n        vsOptions: [{ type: Input }],\n        vsResize: [{ type: Input }],\n        vsUserCmd: [{ type: Input }],\n        vsDebounceTime: [{ type: Input }],\n        vsEqualsFunc: [{ type: Input }]\n    };\n    return VirtualScrollComponent;\n}());\nexport { VirtualScrollComponent };\nfunction VirtualScrollComponent_tsickle_Closure_declarations() {\n    /** @type {?} */\n    VirtualScrollComponent.prototype._templateRef;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._viewContainer;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsData;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsOptions;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsResize;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsUserCmd;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsDebounceTime;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.vsEqualsFunc;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.height;\n    /** @type {?} */\n    VirtualScrollComponent.prototype.width;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._rowFactory;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._subs;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._elem;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._cdr;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._componentFactoryResolver;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._obsService;\n    /** @type {?} */\n    VirtualScrollComponent.prototype._zone;\n}\n//# sourceMappingURL=virtualScroll.component.js.map","/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes} checked by tsc\n */\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ScrollObservableService } from './service';\nimport { VirtualRowComponent } from './virtualRow.component';\nimport { VirtualScrollComponent } from './virtualScroll.component';\nvar VirtualScrollModule = /** @class */ (function () {\n    function VirtualScrollModule() {\n    }\n    VirtualScrollModule.decorators = [\n        { type: NgModule, args: [{\n                    declarations: [VirtualRowComponent, VirtualScrollComponent],\n                    entryComponents: [VirtualRowComponent],\n                    exports: [VirtualScrollComponent],\n                    imports: [CommonModule],\n                    providers: [ScrollObservableService],\n                },] },\n    ];\n    return VirtualScrollModule;\n}());\nexport { VirtualScrollModule };\n//# sourceMappingURL=virtualScroll.module.js.map"],"names":["ScrollObservableService","_this","this","_scrollWin","ReplaySubject","scrollWin$","asObservable","emitScrollWin","e","next","_createRow","Subject","createRow$","emitCreateRow","_removeRow","removeRow$","emitRemoveRow","_shiftRow","shiftRow$","emitShiftRow","_createItem","createItem$","emitCreateItem","_updateItem","updateItem$","emitUpdateItem","_removeItem","removeItem$","emitRemoveItem","decorators","type","Injectable","VirtualRowComponent","_cdr","_translateY","Object","defineProperty","prototype","get","enumerable","configurable","addItem","template","context","index","markForCheck","_viewContainer","createEmbeddedView","setTransform","translateY","updateItem","column","viewRef","$implicit","removeItem","remove","updateRow","row","c","length","Component","args","changeDetection","ChangeDetectionStrategy","OnPush","selector","styles","ctorParameters","ChangeDetectorRef","propDecorators","ViewChild","read","ViewContainerRef","getTransform","HostBinding","CmdOption","Noop","CreateRow","ShiftRow","RemoveRow","CreateItem","UpdateItem","RemoveItem","NoopCmd","cmdType","CreateRowCmd","virtualIndex","actualIndex","initShift","RemoveRowCmd","ShiftRowCmd","shift","CreateItemCmd","columnIndex","dataIndex","UpdateItemCmd","RemoveItemCmd","forRowsIn","start","end","numActualRows","iteratee","r","forColumnsIn","numColumns","numTotalItems","getDataIndex","dataIndx","clamp","min","max","value","Math","getMaxIndex","scrollWin","visibleEndRow","numActualColumns","ScrollItem","isEmpty","obj","keys","difference","a","b","result","key","undefined","UserCmdOption","SetScrollTop","FocusRow","FocusItem","SetScrollTopCmd","FocusRowCmd","rowIndex","FocusItemCmd","itemIndex","VirtualScrollComponent","_elem","_componentFactoryResolver","_obsService","_zone","vsData","empty","vsOptions","vsResize","vsUserCmd","vsDebounceTime","vsEqualsFunc","prevIndex","curIndex","height","width","_rowFactory","resolveComponentFactory","_subs","ngOnInit","getContainerRect","nativeElement","getBoundingClientRect","data$","pipe","startWith","publish","dataMeta$","map","data","Date","getTime","options$","itemWidth","itemHeight","numAdditionalRows","rect$","merge","fromEvent","window","debounceTime","animationScheduler","_a","scroll$","runOutsideAngular","push","subscribe","run","scrollTop$","scrollTop","measure$","combineLatest","rect","options","numPossibleRows","numPossibleColumns","ceil","floor","containerHeight","containerWidth","numPossibleItems","measure","dataTimestamp","numVirtualItems","requestedColumns","numVirtualRows","virtualHeight","requestedRows","actualHeight","measurement","_b","dataLength","numLimitColumns","numActualItems","scrollPercentage","visibleStartRow","distinctUntilChanged","prevWin","curWin","renderCmd$","pairwise","concatMap","rowsDiffCmd$","of","rowsUpdateCmd$","prevIndexMap","curIndexMap","abs","removeRowsMap","createRowsMap","createRowCmds","createItemCmds_1","_loop_2","parseInt","concat","from","removeRowCmds","removeItemCmds_1","_loop_1","reverse","existingRows","left","right","intersection","shiftRowCmds","createItemCmds_2","removeItemCmds_2","updateItemCmds_1","columnDiffCreateItemCmds_1","columnDiffRemoveItemCmds_1","columnsDiffStart","_loop_3","prevRow","numPrevColumns","forColumnsInWithPrev","prevDataIndex","updateScrollWinFunc$","scrollWindow","state","needsCheck","createRowFunc$","filter","cmd","newRow","createComponent","instance","rows","removeRowFunc$","rowComp","destroy","shiftRowFunc$","createItemFunc$","withLatestFrom","createItem","item","_templateRef","updateItemFunc$","update","removeItemFunc$","userCmd$","userSetScrollTop$","focusRowSetScrollTop$","focusItemSetScrollTop$","focusItem","setScrollTopFunc$","main$","scan","changeFn","connect","ngOnDestroy","forEach","sub","unsubscribe","ElementRef","ComponentFactoryResolver","NgZone","ContentChild","TemplateRef","Input","VirtualScrollModule","NgModule","declarations","entryComponents","exports","imports","CommonModule","providers"],"mappings":"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"}