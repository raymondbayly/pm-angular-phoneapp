!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ionic/storage"),require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("@auth0/angular-jwt"),require("rxjs/operators"),require("moment-timezone"),require("@auth0/angular-jwt/src/jwthelper.service")):"function"==typeof define&&define.amd?define("ng-common-library",["exports","@ionic/storage","@angular/core","@angular/common/http","rxjs","@auth0/angular-jwt","rxjs/operators","moment-timezone","@auth0/angular-jwt/src/jwthelper.service"],e):e(t["ng-common-library"]={},t.i4,t.ng.core,t.ng.common.http,t.rxjs,t.angularJwt,t.rxjs.operators,t.moment_,t.i2)}(this,function(t,e,n,o,r,a,s,i,c){"use strict";var l=function(){function t(){}return t.prototype.resize=function(){if(-1!==navigator.userAgent.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")){var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}else window.dispatchEvent(new Event("resize"))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),p="black",u="#F23A27",h="blue",d=i,f=function(){function t(){}return t.prototype.getDateFormat=function(t,e,n){return d(e).utc().tz(t).format(n)},t.prototype.translateDate=function(t,e){return t+6e4*d(t).tz(e).utcOffset()},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),g=function(){function t(t){this.dateService=t}return t.prototype.createZeroAxisLine=function(t){return[{color:"#000000",width:t<0?1:null,value:t<0?0:null,zIndex:3}]},t.prototype.updateAlertPlotLine=function(t){var e=[];return t&&t.activeWarning&&e.push({color:"#CE2029",value:this.dateService.translateDate(t.activeWarning.createdDate,t.timeZone),width:2,zIndex:3}),e},t.prototype.getMinYAxisTick=function(t){return 0<t?0:20*Math.floor(t/20)},t.prototype.getMarkerColor=function(t){var e=p;switch(t){case"N":case"C":e=u;break;case"P":e=h}return e},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:f}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(f))},token:t,providedIn:"root"}),t}(),v=function(){function t(){}return t.prototype.getWarningClass=function(t){var e=null;switch(t){case"V":e="vh-warning";break;case"H":e="h-warning";break;case"M":e="m-warning"}return e},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),y=function(){function t(){this.singlePeraGraphFlowSheetEndPoint=null,this.allPeragraphFlowSheetsEndPoint=null,this.detailedFlowSheetColumnEndpoint=null,this.latestRiScoresEndPoint=null}return t.prototype.setSinglePeraGraphFlowSheetEndPoint=function(t){this.singlePeraGraphFlowSheetEndPoint=t},t.prototype.getSinglePeraGraphFlowSheetEndPoint=function(){return this.singlePeraGraphFlowSheetEndPoint||console.warn("Single PeraGraph flowsheet endpoint is not set!"),this.singlePeraGraphFlowSheetEndPoint},t.prototype.setAllPeragraphFlowSheetsEndPoint=function(t){this.allPeragraphFlowSheetsEndPoint=t},t.prototype.getAllPeragraphFlowSheetsEndPoint=function(){return this.allPeragraphFlowSheetsEndPoint||console.warn("All PeraGraph flowsheets endpoint is not set!"),this.allPeragraphFlowSheetsEndPoint},t.prototype.setDetailedFlowSheetColumnEndpoint=function(t){this.detailedFlowSheetColumnEndpoint=t},t.prototype.getDetailedFlowSheetColumnEndpoint=function(){return this.detailedFlowSheetColumnEndpoint||console.warn("Detailed flowsheet column endpoint is not set!"),this.detailedFlowSheetColumnEndpoint},t.prototype.setLatestRiScoresEndPoint=function(t){this.latestRiScoresEndPoint=t},t.prototype.getLatestRiScoresEndPoint=function(){return this.latestRiScoresEndPoint||console.warn("Latest RI Scores endpoint is not set!"),this.latestRiScoresEndPoint},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),I=function(){function t(t,e){this.http=t,this.flowsheetConfigService=e,this.pollInstance$=r.timer(0,6e4),this.flowSheetSubject=new r.BehaviorSubject(null),this.riScoresSubject=new r.BehaviorSubject(null)}return t.prototype.getFlowSheetSubject=function(){return this.flowSheetSubject},t.prototype.getFlowSheetSubjectValue=function(){return this.flowSheetSubject.value},t.prototype.getRiScoresSubject=function(){return this.riScoresSubject},t.prototype.getRiScoresSubjectValue=function(){return this.riScoresSubject.value},t.prototype.getSinglePeraGraphFlowSheet=function(){return this.http.get(this.flowsheetConfigService.getSinglePeraGraphFlowSheetEndPoint())},t.prototype.getDetailedFlowsheetColumn=function(){return this.http.get(this.flowsheetConfigService.getDetailedFlowSheetColumnEndpoint())},t.prototype.getAllPeraGraphFlowSheets=function(){return this.http.get(this.flowsheetConfigService.getAllPeragraphFlowSheetsEndPoint(),{observe:"response"})},t.prototype.getAllRiScores=function(){return this.http.get(this.flowsheetConfigService.getLatestRiScoresEndPoint(),{observe:"response"})},t.prototype.getFlowSheetInterval=function(){var t=this;return this.pollInstance$.pipe(s.switchMap(function(){return t.getAllPeraGraphFlowSheets()}))},t.prototype.getLatestRiScoresInterval=function(){var t=this;return this.pollInstance$.pipe(s.switchMap(function(){return t.getAllRiScores()}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:y}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(y))},token:t,providedIn:"root"}),t}(),S=function(){function t(){this.singlePeraGraphEndPoint=null,this.allPeraGraphsEndPoint=null}return t.prototype.setSinglePeraGraphEndPoint=function(t){this.singlePeraGraphEndPoint=t},t.prototype.getSinglePeraGraphEndPoint=function(){return this.singlePeraGraphEndPoint||console.warn("Single PeraGraph endpoint is not set!"),this.singlePeraGraphEndPoint},t.prototype.setAllPeraGraphsEndPoint=function(t){this.allPeraGraphsEndPoint=t},t.prototype.getAllPeraGraphsEndPoint=function(){return this.allPeraGraphsEndPoint||console.warn("All PeraGraph endpoint is not set!"),this.allPeraGraphsEndPoint},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),b=function(){function t(t,e){this.http=t,this.peragraphConfigService=e,this.pollInstance$=r.timer(0,6e4),this._peraGraphSubject=new r.BehaviorSubject([])}return t.prototype.getPeraGraphSubject=function(){return this._peraGraphSubject},t.prototype.getSinglePeragraph=function(){return this.http.get(this.peragraphConfigService.getSinglePeraGraphEndPoint())},t.prototype.getAllPeragraphs=function(){return this.http.get(this.peragraphConfigService.getAllPeraGraphsEndPoint())},t.prototype.getPeraGraphInterval=function(){var t=this;return this.pollInstance$.pipe(s.switchMap(function(){return t.getAllPeragraphs()}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:S}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(S))},token:t,providedIn:"root"}),t}(),P=i,w=function(){function t(t){this.dateService=t}return t.prototype.getPatientAge=function(t){if(t&&t.patient&&t.patient.dob){var e=Math.floor(Math.round((this.dateService.translateDate(P.utc().valueOf(),t.timeZone)-t.patient.dob)/864e5));return e<7?Math.floor(e)+"d":7<=e&&e<31?Math.floor(e/7)+"w"+Math.floor(e%7)+"d":31<=e&&e<365?Math.floor(e/29.7)+"m"+Math.floor(e%29.7/7)+"w":365<=e&&e<730?Math.floor(e/365)+"y"+Math.floor(e%365/29.7)+"m":Math.floor(e/365)+"y"}return" "},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:f}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(f))},token:t,providedIn:"root"}),t}(),j=function(){function t(){}return t.prototype.primitiveToBoolean=function(t){return null!=t&&("true"===t||"True"===t||"TRUE"===t||("string"==typeof t?!!+t:!!t))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),E=function(){function t(){this.translations=[],this.keyTranslations={ACTIVE:"perahealth.translation.ACTIVE",DATA_UPDATED:"perahealth.translation.DATA_UPDATED",ELAPSED:"perahealth.translation.ELAPSED",OVERRIDDEN:"perahealth.translation.OVERRIDDEN",RESUMED:"perahealth.translation.RESUMED",V:"perahealth.translation.VH",H:"perahealth.translation.H",M:"perahealth.translation.M",N:"perahealth.translation.N"}}return t.prototype.getTranslation=function(t){return t?this.translations[t]:""},t.prototype.getKeyTranslation=function(t){return t?this.translations[this.keyTranslations[t]]:""},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),m=function(){function t(){this.translationsEndPoint=null}return t.prototype.setTranslationsEndPoint=function(t){this.translationsEndPoint=t},t.prototype.getTranslationsEndpoint=function(){return this.translationsEndPoint||console.warn("Translations endpoint is not set!"),this.translationsEndPoint},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),k=function(){function t(t,e){this.http=t,this.translationsConfigService=e}return t.prototype.getAllTranslations=function(){return this.http.get(this.translationsConfigService.getTranslationsEndpoint())},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:m}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(m))},token:t,providedIn:"root"}),t}(),D=function(){function t(){this.primaryDiagnosesEndpoint=null}return t.prototype.getPrimaryDiagnosesEndpoint=function(){return this.primaryDiagnosesEndpoint||console.warn("Primary diagnoses endpoint is not set!"),this.primaryDiagnosesEndpoint},t.prototype.setPrimaryDiagnosesEndpoint=function(t){this.primaryDiagnosesEndpoint=t},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),A=function(){function t(t,e){this.http=t,this.diagnosisConfigService=e,this.pollInstance$=r.timer(0,6e4),this.diagnosesSubject=new r.BehaviorSubject(null)}return t.prototype.getDiagnosesSubject=function(){return this.diagnosesSubject},t.prototype.getDiagnosesSubjectValue=function(){return this.diagnosesSubject.value},t.prototype.getAllDiagnoses=function(){return this.http.get(this.diagnosisConfigService.getPrimaryDiagnosesEndpoint(),{observe:"response"})},t.prototype.getPrimaryDiagnosesInterval=function(){var t=this;return this.pollInstance$.pipe(s.switchMap(function(){return t.getAllDiagnoses()}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:D}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(D))},token:t,providedIn:"root"}),t}(),T=function(){function t(){this.checkTokenEndPoint=null,this.refreshTokenEndPoint=null,this.getTokenEndPoint=null}return t.prototype.setCheckTokenEndPoint=function(t){this.checkTokenEndPoint=t},t.prototype.getCheckTokenEndPoint=function(){return this.checkTokenEndPoint||console.warn("Check token endpoint is not set!"),this.checkTokenEndPoint},t.prototype.setRefreshTokenEndPoint=function(t){this.refreshTokenEndPoint=t},t.prototype.getRefreshTokenEndPoint=function(){return this.refreshTokenEndPoint||console.warn("Refresh token endpoint is not set!"),this.refreshTokenEndPoint},t.prototype.setGetTokenEndPoint=function(t){this.getTokenEndPoint=t},t.prototype.getGetTokenEndPoint=function(){return this.getTokenEndPoint||console.warn("Get token endpoint is not set!"),this.getTokenEndPoint},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),C=function q(){this.username=null,this.password=null,this.firstname=null,this.lastname=null,this.appid=null,this.roles=null},F=function(){function t(t,e,n,i){this.http=t,this.jwtHelper=e,this.config=n,this.storage=i,this.jwtTokenName="jwt_token",this.appId=null,this.deviceToken=null,this.token$=new r.Subject}return t.prototype.checkToken=function(){var i=this;this.token$.pipe(s.first()).subscribe(function(t){var e=i.jwtHelper.decodeToken(t);if(e){var n=new C;n.username=e.sub,n.roles=e.roles,n.firstname=e.firstname,n.lastname=e.lastname,n.appid=e.appid,i.http.post(i.config.getCheckTokenEndPoint(),n).pipe(s.first()).subscribe(function(){i.appId=n.appid,i.token$.next(t)},function(t){i.appId=null,i.token$.next(null)})}else i.clearToken(),i.token$.next(null)}),this.getExistingToken()},t.prototype.refreshToken=function(e){var n=this;e&&e.username&&setTimeout(function(){n.token$.pipe(s.first()).subscribe(function(t){n.http.post(n.config.getRefreshTokenEndPoint(),e,{responseType:"text"}).pipe(s.first()).subscribe(function(t){n.storage.set(n.jwtTokenName,t)},function(){n.clearToken(),n.token$.next(null)})}),n.getExistingToken()},100)},t.prototype.getToken=function(e){var n=this;this.http.post(this.config.getGetTokenEndPoint(),e,{responseType:"text"}).pipe(s.first()).subscribe(function(t){n.appId=e.appid,n.storage.set(n.jwtTokenName,t).then(function(){n.token$.next(t)},function(){n.token$.next(null)})},function(t){n.token$.next(null)})},t.prototype.clearToken=function(){this.storage.remove(this.jwtTokenName).then(function(t){},function(t){})},t.prototype.getExistingToken=function(){var e=this;this.storage.get(this.jwtTokenName).then(function(t){e.token$.next(t)},function(t){e.token$.next(null)})["catch"](function(t){e.token$.next(null)})},t.prototype.getAppId=function(){return this.appId},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:a.JwtHelperService},{type:T},{type:e.Storage}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(c.JwtHelperService),n.inject(T),n.inject(e.Storage))},token:t,providedIn:"root"}),t}();function U(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var x=function(){function t(){this.activeFacilitiesEndpoint=null,this.activeUnitsEndpoint=null}return t.prototype.getActiveFacilitiesEndpoint=function(){return this.activeFacilitiesEndpoint||console.warn("Active facilities endpoint is not set!"),this.activeFacilitiesEndpoint},t.prototype.setActiveFacilitiesEndpoint=function(t){this.activeFacilitiesEndpoint=t},t.prototype.getActiveUnitsEndpoint=function(){return this.activeUnitsEndpoint||console.warn("Active units endpoint is not set!"),this.activeUnitsEndpoint},t.prototype.setActiveUnitsEndpoint=function(t){this.activeUnitsEndpoint=t},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),G=function _(){this.facilities=[],this.units=[]},$=function(){function t(t,e){this.http=t,this.locationsConfigService=e,this.locations=new G,this.facilitiesAndUnit$=new r.Subject}return t.prototype.getFacilitiesAndUnits=function(){var f=this;this.locations.facilities&&0<this.locations.facilities.length&&this.locations.units&&0<this.locations.units.length?this.facilitiesAndUnit$.next(this.locations):this.facilitySubscription=this.getActiveFacilities().pipe(s.map(function(t){return t.facilities})).subscribe(function(d){if(d&&0<d.length){var t=[];try{for(var e=U(d),n=e.next();!n.done;n=e.next()){var i=n.value;t.push(i.facilityID)}}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=e["return"])&&r.call(e)}finally{if(o)throw o.error}}f.unitSubscription=f.getActiveUnitsForFacilities(t).pipe(s.map(function(t){return t.units})).subscribe(function(t){f.locations=new G;try{for(var e=U(d),n=e.next();!n.done;n=e.next()){var i=n.value,o=!1;try{for(var r=U(t),a=r.next();!a.done;a=r.next()){if(a.value.key.facilityID===i.facilityID){o=!0;break}}}catch(u){l={error:u}}finally{try{a&&!a.done&&(p=r["return"])&&p.call(r)}finally{if(l)throw l.error}}o&&f.locations.facilities.push(i)}}catch(h){s={error:h}}finally{try{n&&!n.done&&(c=e["return"])&&c.call(e)}finally{if(s)throw s.error}}var s,c,l,p;f.locations.units=t,f.facilitiesAndUnit$.next(f.locations)},function(t){console.log("Could not update units! Error = "+t.message)})}var o,r},function(t){console.log("Could not update facilities! Error = "+t.message)})},t.prototype.getActiveFacilities=function(){return console.log("Getting all facilities: "+this.locationsConfigService.getActiveFacilitiesEndpoint()),this.http.get(this.locationsConfigService.getActiveFacilitiesEndpoint())},t.prototype.getActiveUnitsForFacilities=function(t){return console.log("Getting all active units: "+this.locationsConfigService.getActiveUnitsEndpoint()+t),this.http.get(this.locationsConfigService.getActiveUnitsEndpoint()+t)},t.prototype.ngOnDestroy=function(){this.facilitySubscription&&!this.facilitySubscription.closed&&this.facilitySubscription.unsubscribe(),this.unitSubscription&&!this.unitSubscription.closed&&this.unitSubscription.unsubscribe()},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:x}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(o.HttpClient),n.inject(x))},token:t,providedIn:"root"}),t}(),H=function(){function t(){this.usagePollingInterval=5e3}return t.prototype.setUsageDataEndPoint=function(t){this.usageDataEndPoint=t},t.prototype.getUsageDataEndPoint=function(){return this.usageDataEndPoint||console.warn("usage data endpoint is not set!"),this.usageDataEndPoint},t.prototype.getUsagePollingInterval=function(){return this.usagePollingInterval},t.prototype.setUsagePollingInterval=function(t){this.usagePollingInterval=t},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),R=function B(t,e,n,i,o,r,a,s,c,l,p,u,h){this.viewedBy=t,this.patient=e,this.vipIndicator=n,this.vnm=i,this.mrn=o,this.admitDate=r,this.dischargeDate=a,this.facilityId=s,this.unitId=c,this.provider=l,this.utcCode=p,this.usageCode=u,this.viewDate=h},L={Array:"U",Graph:"G"},M=i,N=function(){function i(t,e,n,i,o){this.http=t,this.jwtHelper=e,this.usageConfigService=n,this.locationService=i,this.tokenApiService=o,this.usageData=new Array,this.viewedVisits=[],this.initialized=!1,this.locationsLoaded$=new r.Subject,this.locationsLoaded=!1,this.startedLoadingLocations=!1,this.graphUpdated$=new r.Subject,this.usageDataAdded$=new r.Subject}return i.prototype.init=function(){this.initialized||(this.initialized=!0)},i.prototype.startUsageReportingService=function(){var e=this;this.pollInstance$=r.timer(0,this.usageConfigService.getUsagePollingInterval()),this.pollInstance$.subscribe(function(){e.usageData&&0<e.usageData.length&&e.submitUsageData()}),this.usageData&&0<this.usageData.length&&this.submitUsageData(),this.locationService.facilitiesAndUnit$.pipe(s.first()).subscribe(function(t){e.locations=t,e.locationsLoaded=!0,e.locationsLoaded$.next(!0)}),this.locationService.getFacilitiesAndUnits()},i.prototype.submitUsageData=function(){console.log("Submitting usage data for app "+this.tokenApiService.getAppId()+" Size = "+this.usageData.length);var t=this.usageData.slice();this.usageData=[],this.http.post(this.usageConfigService.getUsageDataEndPoint(),t).pipe(s.first()).subscribe()},i.prototype.clearUsageCache=function(){this.viewedVisits=[]},i.prototype.addUsageData=function(t,n){var i=this;this.updateFacilityAndUnitIdsForGraph(t).pipe(s.first(),s.tap(function(e){i.tokenApiService.token$.pipe(s.first()).subscribe(function(t){n===L.Array?e&&i.viewedVisits.indexOf(e.vnm)<0&&(i.viewedVisits.push(e.vnm),i.addUsageDataFromToken(e,n,t)):i.addUsageDataFromToken(e,n,t)}),i.tokenApiService.getExistingToken()})).subscribe(),this.locationsLoaded||this.startedLoadingLocations||(this.startedLoadingLocations=!0,this.locationService.getFacilitiesAndUnits())},i.prototype.updateFacilityAndUnitIdsForGraph=function(t){var e=this,n=JSON.parse(JSON.stringify(t));return!0===this.locationsLoaded?r.of(i.assignUnitAndFacIdToPeraGraph(n,this.locations)):this.locationsLoaded$.pipe(s.map(function(){return i.assignUnitAndFacIdToPeraGraph(n,e.locations)}))},i.assignUnitAndFacIdToPeraGraph=function(t,e){try{for(var n=U(e.facilities),i=n.next();!i.done;i=n.next()){var o=i.value;if(t.facilityId===o.displayName){t.facilityId=o.facilityID;break}}}catch(h){c={error:h}}finally{try{i&&!i.done&&(l=n["return"])&&l.call(n)}finally{if(c)throw c.error}}try{for(var r=U(e.units),a=r.next();!a.done;a=r.next()){var s=a.value;if(t.unitId===s.displayName){t.unitId=s.key.unitID;break}}}catch(d){p={error:d}}finally{try{a&&!a.done&&(u=r["return"])&&u.call(r)}finally{if(p)throw p.error}}return t;var c,l,p,u},i.prototype.addUsageDataFromToken=function(t,e,n){var i=this.jwtHelper.decodeToken(n);if(i){var o=new R(i.sub,t.patient.lname+", "+t.patient.fname,t.vipIndicator,t.vnm,t.patient.medicalRecordNumber,t.admitDate,t.dischargeDate,t.facilityId,t.unitId,t.attendingProvider.lastName+", "+t.attendingProvider.firstName,t.visitUnitType,e,M.valueOf());this.usageData.push(o),this.usageDataAdded$.next(o)}},i.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],i.ctorParameters=function(){return[{type:o.HttpClient},{type:a.JwtHelperService},{type:H},{type:$},{type:F}]},i.ngInjectableDef=n.defineInjectable({factory:function(){return new i(n.inject(o.HttpClient),n.inject(c.JwtHelperService),n.inject(H),n.inject($),n.inject(F))},token:i,providedIn:"root"}),i}(),V=function J(t,e,n,i,o,r,a,s){this.active=t,this.facilityID=e,this.displayName=n,this.displayOrder=i,this.facilityTimezone=o,this.fullName=r,this.primaryType=a,this.secondaryType=s},z=function W(t,e,n){this.key=t,this.displayName=e,this.utcCode=n},O=function Z(t,e){this.facilityID=t,this.unitID=e};t.BrowserService=l,t.ChartService=g,t.DateService=f,t.WarningService=v,t.FlowsheetsApiService=I,t.FlowsheetsConfigService=y,t.PeragraphApiService=b,t.PeragraphConfigService=S,t.PatientService=w,t.CommonService=j,t.TranslationsService=E,t.TranslationsApiService=k,t.TranslationsConfigService=m,t.DiagnosisApiService=A,t.DiagnosisConfigService=D,t.TokenConfigService=T,t.TokenApiService=F,t.LocationsApiService=$,t.LocationsConfigService=x,t.UsageConfigService=H,t.UsageApiService=N,t.User=C,t.Facility=V,t.Unit=z,t.PatientAccess=R,t.UsageType=L,t.ɵa=O,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-common-library.umd.min.js.map